#+TITLE:   UNH Main Customization Package
#+DATE:    July 18, 2021
#+SINCE:   <replace with next tagged release version>
#+STARTUP: inlineimages nofold

* Table of Contents :TOC_3:noexport:
- [[#description][Description]]
  - [[#maintainers][Maintainers]]
    - [[#update-packages][update packages]]
    - [[#write-documentation-for-code-blocks][Write documentation for code blocks]]
    - [[#include-scss-blocks][include (S)CSS blocks]]
    - [[#include-html-blocks][include HTML blocks]]
- [[#prerequisites][Prerequisites]]
- [[#features][Features]]
- [[#configuration][Configuration]]
  - [[#general][General]]
    - [[#javascript][JavaScript]]
    - [[#scss][SCSS]]
  - [[#external-search][External Search]]
    - [[#package][Package]]
    - [[#config][Config]]
  - [[#help-menu][Help Menu]]
    - [[#package-1][Package]]
    - [[#config-1][Config]]
    - [[#scss-1][SCSS]]
  - [[#libchat][LibChat]]
  - [[#search-bar-sub-menu][Search Bar Sub Menu]]
    - [[#package-2][Package]]
    - [[#config-2][Config]]
    - [[#component][Component]]
  - [[#unpaywall][Unpaywall]]
    - [[#package-3][Package]]
    - [[#config-3][Config]]
    - [[#component-1][Component]]
  - [[#directives][Directives]]
    - [[#prm-search-bar-after][prm-search-bar-after]]
    - [[#prm-search-result-availability-line-after][prm-search-result-availability-line-after]]
- [[#troubleshooting][Troubleshooting]]

* Description
# A summary of what this module does.

+ If possible, include a brief list of feature highlights here
+ Like code completion, syntax checking or available snippets
+ Include links to packages & external things where possible

** Maintainers
+ @jlcolbert (Author)

*** DONE update packages
CLOSED: [2021-07-20 Tue 13:34]
*** TODO Write documentation for code blocks
*** TODO include (S)CSS blocks
*** TODO include HTML blocks

* Prerequisites
This module has no prerequisites.

* Features
# An in-depth list of features, how to use them, and their dependencies.

+ External Search
+ Help Menu
+ LibChat
+ Search Bar Sub Menu
+ Unpaywall

* Configuration
# How to configure this module, including common problems and how to address them.
** General
*** JavaScript
#+begin_src javascript :noweb yes :tangle ./js/main.js
<<imports>>

<<configuration>>
<<directives>>

// eslint-disable-next-line no-undef
const app = angular.module("viewCustom", [
  "angularLoad",
  <<packages>>
]);

<<libchat>>

app
<<constants>>
<<components>>
<<values>>;
#+end_src
*** SCSS
**** Partials

** External Search
*** Package
#+begin_src javascript :noweb-ref imports
import "@orbis-cascade/primo-explore-external-search";
#+end_src

#+begin_src javascript :noweb-ref packages
"externalSearch",
#+end_src

*** Config
#+begin_src javascript :tangle ./js/components/externalSearch/externalSearch.config.js
const ExternalSearchConfig = [
  {
    name: "Books & Media Worldwide",
    url: "https://unhlibrary.on.worldcat.org/search?",
    img: "/discovery/custom/01USNH_UNH-MAIN/img/worldcat_logo.png",
    alt: "Worldcat Logo",
    // eslint-disable-next-line no-unused-vars
    mapping(queries, filters) {
      const queryMappings = {
        any: "kw",
        title: "ti",
        creator: "au",
        subject: "su",
        isbn: "bn",
        issn: "n2",
      };
      try {
        return `queryString=${queries
          .map((part) => {
            const terms = part.split(",");
            const type = queryMappings[terms[0]] || "kw";
            const string = terms[2] || "";
            const join = terms[3] || "";
            return `${type}:${string} ${join} `;
          })
          .join("")}`;
      } catch (e) {
        return "";
      }
    },
  },
  {
    name: "Google Scholar",
    url: "https://unh.idm.oclc.org/login?qurl=https%3A//scholar.google.com/scholar?q=",
    img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/200px-Google_%22G%22_Logo.svg.png",
    alt: "Google Scholar Logo",
    // eslint-disable-next-line no-unused-vars
    mapping(queries, filters) {
      try {
        return queries.map((part) => part.split(",")[2] || "").join(" ");
      } catch (e) {
        return "";
      }
    },
  },
];

export default ExternalSearchConfig;

#+end_src

#+begin_src javascript :noweb-ref configuration
import ExternalSearchConfig from "./components/externalSearch/externalSearch.config";
#+end_src

#+begin_src javascript :noweb-ref values
.value("searchTargets", ExternalSearchConfig)
#+end_src

** Help Menu
*** Package
#+begin_src javascript :noweb-ref imports
import "primo-explore-help-menu";
#+end_src

#+begin_src javascript :noweb-ref packages
"helpMenuContentDisplay",
"helpMenuTopbar",
#+end_src

*** Config
#+begin_src javascript :tangle ./js/components/helpMenu/helpMenu.config.js
import Items from "./items.constant";
import Updates from "./updates.constant";

const HelpMenuConfig = {
  logToConsole: true,
  publishEvents: false,

  enableNotificationIndicator: true,
  notificationIndicatorExpiration: 1000 * 60 * 60 * 24 * 7 * 2,

  helpMenuTitle: "Get Help",
  updatesLabel: "What's New?",
  // eslint-disable-next-line camelcase
  list_of_updates: Updates,
  entriesLabel: "Search Help",
  // eslint-disable-next-line camelcase
  list_of_elements: Items,

  helpMenuWidth: 500,
};

export default HelpMenuConfig;
#+end_src

#+begin_src javascript :noweb-ref configuration
import HelpMenuConfig from "./components/helpMenu/helpMenu.config";
#+end_src

#+begin_src javascript :noweb-ref constants
.constant("helpMenuConfig", HelpMenuConfig)
#+end_src

**** Items
#+begin_src javascript :tangle ./js/components/helpMenu/items.constant.js
const Items = [
  {
    id: "getting-started",
    title: "Getting Started",
    description:
      "brief static html content with an overview on how to use BULS; links to direct to main BULS help page in WordPress, other pages, and/or other sections of the menu",
    icon: { code: "description", group: "action" },
    template: `
      <h2>Using the Library Search Box</h2>
      <p>The Library Search Box allows you to find scholarly articles, books, journals, streaming media, and more.</p>
      <p>See the What's in Search section for a more detailed breakdown about the content types, collections, and materials not available in the results.</p>
      <h2>Search Tips</h2>
      <p>In a Basic Search, the items in your results will contain all of your search terms. Your terms might be in the title, author name, abstract, indexed full text, subjects, and more.</p>
      <p>Use the Advanced Search for more specific or complex searches. An Advanced Search allows you to limit your results using certain parameters, and build complex search strings.</p>
      <h3>Filter Results</h3>
      <p>Use the filters on the left side of the results (or above if on a small screen or phone) to limit what results you get.</p>
      <p>For example, you can limit your results to peer-reviewed articles that are Open Access, or published after a certain year.</p>
      <p>You can click the lock on your current filters to have them remembered if you edit your search.</p>
      <p>Move your cursor to the right of a filter and click the box that appears to exclude results that fit that parameter.</p>
    `,
  },
  {
    id: "tutorials",
    title: "Library Tutorials",
    description:
      "at a minimum, links to individual videos and a playlist of existing BULS video tutorials (tbd if in Kaltura, WordPress, or youtube); if possible and desired, embed using Kaltura embed code",
    icon: { code: "shop_two", group: "action" },
    template: `
      <h2>Library Tutorials</h2>
      <h3>Basic Tutorial Guides</h3>
      <ul>
        <li>
          <a class="arrow-link md-primoExplore-theme" href="https://libraryguides.unh.edu/tutorials" target="_blank">
            <span ng-if="link.linkURL.length > 0 &amp;&amp; link.displayLabel.indexOf('$$E') != 0" ng-bind-html="link.displayLabel">Library Tutorials: Start Here</span>
          </a>
        </li>
        <li>
          <a class="arrow-link md-primoExplore-theme" href="https://libraryguides.unh.edu/c.php?g=904188&p=6519518" target="_blank">
            <span ng-if="link.linkURL.length > 0 &amp;&amp; link.displayLabel.indexOf('$$E') != 0" g-bind-html="link.displayLabel">How to Find Full Text</span>
          </a>
        </li>
        <li>
          <a class="arrow-link md-primoExplore-theme" href="https://libraryguides.unh.edu/c.php?g=904188&p=6550618" target="_blank">
            <span ng-if="link.linkURL.length > 0 &amp;&amp; link.displayLabel.indexOf('$$E') != 0" ng-bind-html="link.displayLabel">How to Find a Book</span>
          </a>
        </li>
        <li>
          <a class="arrow-link md-primoExplore-theme" href="https://libraryguides.unh.edu/c.php?g=904188&p=6527296" target="_blank">
            <span ng-if="link.linkURL.length > 0 &amp;&amp; link.displayLabel.indexOf('$$E') != 0" ng-bind-html="link.displayLabel">How to Request Full Text</span>
          </a>
        </li>
        <li>
          <a class="arrow-link md-primoExplore-theme" href="https://libraryguides.unh.edu/c.php?g=904188&p=7768455" target="_blank">
            <span ng-if="link.linkURL.length > 0 &amp;&amp; link.displayLabel.indexOf('$$E') != 0" ng-bind-html="link.displayLabel">How to Find Journals</span>
          </a>
        </li>
      </ul>
      <h3>In-Depth Guides</h3>
      <ul>
        <li>
          <a class="arrow-link md-primoExplore-theme" href="https://libraryguides.unh.edu/librarysearchbox_unhdurham">How to Use the UNH Durham Library Search Box</a>
        </li>
        <li>
          <a class="arrow-link md-primoExplore-theme" href="https://libraryguides.unh.edu/LCC">Library Call Numbers</a>
        </li>
      </ul>
    `,
  },
  {},
  {
    id: "whats-in-search",
    title: "What am I searching?",
    description: `brief description of material types, "scopes", and collections; may have submenus for each of the above; likely also link out to WordPress page with all PCI collections`,
    icon: { code: "toc", group: "action" },
    template: `
      <h2>Databases/Journals</h2>
      <h3>Databases</h3>
      <p>The UNH Library subscribes to many databases. When you perform a search, your results will include items from (most of) those databases.</p>
      <p>While many of the databases are primarily used to find scholarly articles, some databases also provide access to statistics, images and audio, historical documents, and more.</p>
      <p>You can search the name of a database in the Library Search Box, or you can use our <a href="https://library.unh.edu/find/databases">Databases</a> page to look for and visit specific databases.</p>
      <h3>Journals</h3>
      <p>Most of the time, the resources in databases come from journals. You can search in specific journals by using the <a href="https://unh.primo.exlibrisgroup.com/discovery/jsearch?vid=01USNH_UNH:MAIN">Journal Search</a>.</p>
      <p>You can access the Journal Search on the main page of the library's website, or in the top menu links of the Library Search Box.</p>
      <h2>Library Books</h2>
      <p>The library provides access to physical books as well as e-books.</p>
      <h2>Streaming Media</h2>
      <p>Through the library, you have access to audio and video materials for free.</p>
      <p>These materials include movies in Kanopy, plays in Alexander Street Press, and music in Music Online, to name a few.</p>
      <h2>Newspapers</h2>
      <p>When you search, your results won't include newspaper articles. Instead, you have the option to repeat your search in the dedicated <a href="https://unh.primo.exlibrisgroup.com/discovery/npsearch?vid=01USNH_UNH:MAIN">Newspapers Search</a>, which only includes newspaper articles.</p>
      <p>You can find links to the <a href="https://unh.primo.exlibrisgroup.com/discovery/npsearch?vid=01USNH_UNH:MAIN">Newspapers Search</a> in the top menu links, at the bottom of your search results, and in the Resource Type filter.</p>
      <h2>What's not included?</h2>
      <p>Not every database gives full-text access. Some only index bibliographic information about resources.</p>
      <p>By default, your search results will only include online resources with full text. You can see the resources with no full text by clicking "Include items with no full text".</p>
      <h2>Getting Full-Text</h2>
      <p>If we don't have an article, book or book chapter, or any other resource, you can request it through Interlibrary Loan.<p>
      <p>With Interlibrary Loan, we will borrow the resource you want from another library and check it out to you for free.</p>
      <p>You can fill out the Interlibrary Loan form manually, or you can click "Interlibrary Loan (DURHAM users)" in "How to find it" to autopopulate a form. <strong>You must be logged into your library account to see the Interlibrary Loan option.</strong></p>
    `,
  },
  {
    id: "didnt-find",
    title: "Didn't find it?",
    description: `TBD info about ILL, scope of collections, and problem cases`,
    icon: { code: "swap_horiz", group: "action" },
    template: `
      <p>Research can be an iterative process. It takes time and patience to figure out the right search to find what you're looking for. When you're having trouble, try these options:<p>
      <h2>Repeat your search in an external database</h2>
      <p>Using the "External Search" filter, click "Books & Media Worldwide" to repeat your search in our WorldCat discovery service. Use this primarily for books, CDs, DVDs, and other physical items.</p>
      <p>Also in the "External Search" filter is the option to repeat your search in Google Scholar. Use this for scholarly articles.</p>
      <p>Search specific subjects using our subscription databases. For example, if you're writing a paper for an English class, look in MLA or JSTOR.</p>
      <h2>Citation Trails</h2>
      <p>Look in the bibliography/works cited of an article or book that talks about your research topic and investigate the sources it cites.</p>
      <p>Look for red arrows pointing up or down in your search results: clicking on those will show you what the resource cites or what resources cite it.</p>
      <h2>Ask Us!</h2>
      <p>The UNH librarians can help you with search strategies, citations and citation management, bibliographies, and more!</p>
      <p>You can contact us in a few ways:</p>
      <ul>
        <li>The "Get Help" button on the right side of your results, which opens a chat dialogue or an email form, depending on if chat is currently available.</li>
        <li>The "Ask a Librarian" option in the menu under the search box.</li>
        <li>The "Ask a Librarian" link in the top menu.</li>
        <li>The "Ask a Librarian" link on the front page of the library website.</li>
        <li>Anywhere else you see the "Ask a Librarian" link.</li>
        <li><a href="https://librarycalendars.unh.edu/appointments/">Make an appointment with a subject librarian</a></li>
      </ul>
      <p>Many librarians also include links in their email signatures or Research Guides profile that let you schedule meetings with them.</li>
      <p>Every department has a <a href="https://library.unh.edu/about-us/faculty-staff-directory/subject-librarians">Subject Librarian</a> who can help with research questions in that subject.</p>
    `,
  },
  {},
  {
    id: "guides",
    title: "Research Guides",
    description: `info about research, subject, course, and how to guides; how to find in BULS by way of search and related more info links; link out to LibGuides home`,
    icon: { code: "directions", group: "maps" },
    template: `
      <h2>Find Your Research Path</h2>
      <p>Our experts can help you get a start. Subject guides provide recommendations for finding articles, books, and background information. Course guides identify course-specific library resource but can also help you with similar classes.</p>
      <p>You can find Subject Guides, How-To Guides, Course Guides, and more on our <a href="https://libraryguides.unh.edu/">Research Guides</a> page.</p>
    `,
  },
  {},
  {
    id: "saving-results",
    title: "Saving Results",
    description: "information about My Favorites, exporting results, ref managers",
    icon: { code: "save", group: "content" },
    template: `
      <h2>My Favorites</h2>
      <p>
      <span>Favorites let you save results and label them for easy recall. To use:</span>
      <ul>
          <li>Sign In first</li>
          <li>Click the pushpin next to the title to save to My Favorites</li>
          <li>To view My Favorites, click the pushpin in the upper right menu</li>
          <li>Use the "...Send To" options to export to other formats and reference managers.</li>
          <li>Organize your results by adding labels. For example, frequently used databases.</li>
      </ul>
      </p>
      <h2>Saved Searches</h2>
      <p>You can save searches to run again later, or to set alerts to be notified via email when new records are available.</p>
      <p>Saved search alerts are most effective when combined with filters, such as material type(s), date range, and availability.</p>
      <p>After doing a search...</p>
      <ul>
          <li>Sign In first</li>
          <li>Click the Save Search pin at the top of the results list.</li>
          <li>You'll receive a prompt to optionally set a notifcation for email alerts</li>
          <li>To return to your saved searches, click the pushpin icon in the upper right corner (same as for My Favorites)</li>
          <li>Alerts can be enabled or disabled by selecting the bell icon</li>
      </ul>
    `,
  },
  {
    id: "citing-sources",
    title: "Citing Sources",
    description: "likely, but may depend on if including saving results; would have info about ref managers",
    icon: { code: "create", group: "content" },
    template: `
      <h2>Citation Formatting</h2>
      Use the quotation mark icon to copy a citation in these formats:
      <ul>
        <li>APA (7th edition)</li>
        <li>Chicago 17th/Turabian 9th Author-Date</li>
        <li>Chicago 17th/Turabian 9th Notes-Bibliography</li>
        <li>MLA (8th edition)</li>
        <li>IEEE</li>
      </ul>
      <p>Double check the citation details and formatting for accuracy.</p>
      <p>See our <a href="https://library.unh.edu/research-support/citation-styles">Citation Styles</a> page for more information about citing sources.</p>
      <h2>Citation Managers</h2>
      <p>Bibliographic management tools allow you to store, manage, and format citations. They can import references from databases, place citations formatted in various styles directly into your text, and create reference lists.</p>
      <p>They are also a good way to create a library of the resources you've cited; some managers even save the PDF for you.</p>
      <p>Note: EndNote can be purchased at the UNH Computer Store. The UNH Library does not subscribe to EndNote.</p>
      <h3>Saving Citations</h3>
      <p>Citation managers import bibliographic information about the resource. Most include a browser plugin for clipping this information.</p>
      <p>The Library Search Box also lets you export citations in RIS format to manually import into your citation manager, such as:</p>
      <ul>
        <li>Zotero</li>
        <li>Mendeley</li>
        <li>Othe citation managers that use RIS format</li>
      </ul>
      <p>
        See our <a href="https://libraryguides.unh.edu/c.php?g=1066872" target="_blank">Zotero Series Guide</a>
        for more details on using Zotero.
      </p>
    `,
  },
  {
    id: "account",
    title: "My Library Account",
    description:
      "information about My Library Account functionality- loans, renewals, policies?; may also highlight or link to My Library Account",
    icon: { code: "account_box", group: "action" },
    template: `
    <h2>My Library Account</h2>
    <p>Your Library Account and Library Card consists of the following tabs, which enable you to view the contents of your library card and perform library services, such as renewing a book or canceling a request:</p>
    <ul>
      <li>Overview – Displays a summary of each of the tabs to allow you to see if any action is required.</li>
      <li>Loans – Displays all of your current and outstanding loans.</li>
      <li>Requests – Displays all of your current requests.</li>
      <li>Fines & Fees – Displays all of your current fees and fines.</li>
      <li>Blocks & Messages – Displays all general messages and any blocks that may prevent you from accessing services in the library.</li>
      <li>Personal Details – You can tailor the user interface so that it reflects the way you usually search. For example, you can specify the default language.</li>
    </ul>
    <p><a href="https://unh.primo.exlibrisgroup.com/discovery/login?vid=01USNH_UNH:MAIN&lang=en">Sign in</a> to your Library Account by clicking the orange "Sign in" link in the top right corner. After you sign in, click your name and click "Library Card".</p>
    `,
  },
  {},
  {
    id: "ask-us",
    title: "Ask Us",
    description: "needs definition; how to point to chat? link to ask a librarian?",
    icon: { code: "forum", group: "communication" },
    template: `
      <h2>Ask Us!</h2>
      <p>The UNH librarians can help you with search strategies, citations and citation management, bibliographies, and more!</p>
      <p>You can contact us in a few ways:</p>
      <ul>
        <li>The "Get Help" button on the right side of your results, which opens a chat dialogue or an email form, depending on if chat is currently available.</li>
        <li>The "Ask a Librarian" option in the menu under the search box.</li>
        <li>The "Ask a Librarian" link in the top menu.</li>
        <li>The "Ask a Librarian" link on the front page of the library website.</li>
        <li>Anywhere else you see the "Ask a Librarian" link.</li>
        <li><a href="https://librarycalendars.unh.edu/appointments/">Make an appointment with a subject librarian</a></li>
        <li>Email us at: <a href="mailto:ask@unh.libanswers.com">ask@unh.libanswers.com</a></li>
      </ul>
      <p>Many librarians also include links in their email signatures or Research Guides profile that let you schedule meetings with them.</li>
      <p>Every department has a <a href="https://library.unh.edu/about-us/faculty-staff-directory/subject-librarians">Subject Librarian</a> who can help with research questions in that subject.</p>
      <h2>Other Contact Information</h2>
      <h3>Email or Call</h3>
      <p>Email us at: <a href="mailto:ask@unh.libanswers.com">ask@unh.libanswers.com</a></p>
      <h4>Dimond Library</h4>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=36">Research Center</a><br />
      (603) 862-1544</p>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=24">Government Information</a><br />
      (603) 862-1435</p>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=3">Special Collections &amp; Archives</a><br />
      (603) 862-2714</p>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=4">Circulation Desk</a><br />
      (603) 862-3125</p>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=4">Reserves</a><br />
      (603) 862-3125</p>
      <h4>Branch Libraries</h4>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=20">Chemistry Library</a><br />
      (603) 862-1083</p>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=22">Engineering, Math, &amp; Computer Science Library</a><br />
      (603) 862-1196</p>
      <p><a href="https://library.unh.edu/directory/all?last_name=&amp;role=All&amp;category=34">Physics Library</a><br />
      (603) 862-2348</p>
      <h4>UNH Manchester Library</h4>
      <p><a href="https://libraryguides.unh.edu/remoteaccess/researchhelp" title="UNH Manchester Research Help">UNH Manchester Library</a> (603) 641-4173</p>
      <h4>UNH Law Library</h4>
      <p><a href="https://law.unh.libguides.com/home" title="UNH Law Library">UNH Law Library</a> (603) 513-5130</p>
    `,
  },
];

export default Items;
#+end_src

**** Updates
#+begin_src javascript :tangle ./js/components/helpMenu/updates.constant.js
const Updates = [
  {
    id: "hathitrust-availability",
    title: "'Print version unavailable for checkout'?",
    description:
      "the hathitrust emergency temporary access service (ETAS) allows online reading access to selected materials",
    icon: { code: "link", group: "content" },
    template: `
      <p class="big-text"><strong>If books are found via a Library Search, the text "Print Version Unavailable for Checkout" will be displayed with the results. Those materials will all also contain links to the full text online (“Full Text Available at HathiTrust”).</strong></p>
      <h3>How to Access Books via HathiTrust</h3>
      <ol>
        <li>Click "HathiTrust Emergency Temporary Access: Click here then login for access" to see the book in Hathitrust.</li>
        <li>From anywhere on the HathiTrust website, click the yellow LOG IN button.</li>
        <li>Find and select the University of New Hampshire in the list of partner institutions.</li>
        <li>Log in with your UNH id and password.</li>
        <li>When you have logged in, you will be returned to the book in HathiTrust.</li>
      </ol>
      <a href="https://libraryguides.unh.edu/hathitrust"><strong>To learn more about the Hathitrust Emergency Temporary Access Service, visit this Research Guide.</strong></a>
      `,
  },
  {
    id: "visiting-the-libraries",
    title: "Visiting the Libraries: COVID-19",
    description:
      "discussion of covid-related changes to bu libraries operation",
    icon: { code: "business", group: "communication" },
    template: `
      <h2>Try Online First</h2>
      <p>Many of our print books will not circulate during the pandemic. Try limiting your search to electronic items using the "Available Online" search profile.</p>
      <p>Our services, such as research help, are still available online. Ask a librarian for more help!.</p>
      <a href="https://library.unh.edu/blog/2021/01/covid-19-phased-return"</a>COVID-19 Phased Return Information</a>
      <h2>Building Access</h2>
      <p>During the pandemic, our buildings have limited hours and are open only to UNH students, faculty, and staff who are part of the UNH COVID testing protocol.</p>
      <p><strong>Beginning on March 9, everyone wishing to use the library will need swipe in with their UNH ID (with a valid Wildcat pass) to enter our library locations.</strong></p>
      <p>As with all campus buildings, library users must wear masks when in library spaces. Hand sanitizer and sanitizing wipes will be available, and patrons are asked to maintain a 6-foot physical distance from other patrons, not move furniture, and practice recommended hygiene to limit the spread of COVID-19. To allow for physical distancing, our meeting and study rooms now have reduced occupancy limits.</p>
    `,
  },
  {},
  {
    id: "new-features",
    title: "What's New in the Library Search Box?",
    description: "information on newly added features",
    icon: { code: "extension", group: "action" },
    template: `
      <h2>Recently Added Features</h2>
      <h3>Available Online</h3>
      <p>Click the dropdown menu that says "Library Catalog & Articles" and select "Available Online" to limit your results to only things we have immediate online access to. Expand your results to include items you can get through Interlibrary Loan.</p>
      <h3>External Search</h3>
      <p>The External Search filter on the left side of the results allows you to repeat your search in WorldCat (Books & Media Worldwide) or Google Scholar.</p>
      <h3>Information Below Search Box</h3>
      <p>The menu below the search box contains links to important information and resources, such as links to the other campus search boxes, library locations, and a tutorial research guide.</p>
      <h3>Help Menu</h3>
      <p>This is what you're looking at right now! In the top right menu of the webpage, click the circular icon with the question mark to open this help menu. It contains a lot of information about searching for resources.</p>
      <h3>Newspaper Search</h3>
      <p>Newspaper articles will no longer be included in your results. Instead, you can use the dedicated Newspaper Search. You can get to this by doing a regular search and then clicking "Newspaper Search" in the Resource Type filter, or by scrolling to the bottom of your results and clicking the link there. There is also a link in the top menu of the results page.</p>
      <h3>Unpaywall</h3>
      <p>The Library Search Box already indicates if an article is Open Access (meaning it can be accessed without paying for it, even if you're not in your library account). However, it doesn't always give you a link to the Open Access version. With this new feature, a link that says "View Open Access Version via Unpaywall" will show up in your results. Clicking this link will download directly or take you to the article, for free! (It sometimes even finds Open Access versions when the Library Search Box can't, including on items we don't have access to.)</p>
      </ul>
    `,
  },
];

export default Updates;

#+end_src
*** SCSS
#+begin_src scss :tangle ./scss/partials/_help-menu.scss
/*Styles for primo-explore-help-menu: MW 20190409 */

#search-help-menu-content h2 {
  font-weight: 500;
}
#search-help-menu-content h3 {
  font-weight: 400;
}
#search-help-menu-content img {
  border: 2px solid var(--color-secondary-background-dark, #999999);
  border-radius: 4px;
  max-width: 95%;
  margin: 10px;
  padding: 10px;
}
a.helpMenu--location-button {
  padding: 6px;
  background-color: var(--color-button-background, #22647b);
  border-radius: 4px;
  color: #ffffff;
  text-transform: uppercase;
  box-shadow: 2px 2px 2px 1px rgba(0, 0, 255, 0.2);
}

div.helpMenu--location {
  padding-bottom: 10px;
}

help-menu-topbar {
  --notification-indicator-display: none;
  --notification-indicator-color: var(--color-accent-red-background, red);
}

help-menu-topbar .notification-indicator {
  display: var(--notification-indicator-display, none);
  background-color: var(--notification-indicator-color, red);

  position: absolute;
  margin-left: 32px;
  top: 17px;
  height: 10px;
  width: 10px;
  border-radius: 50%;
}

#+end_src

** LibChat
#+begin_src javascript :noweb-ref libchat
// Adds the chat slide out
// eslint-disable-next-line func-names
(function () {
  // eslint-disable-next-line no-undef
  const lc = document.createElement("script");
  lc.type = "text/javascript";
  lc.async = "true";
  lc.src =
    "https://v2.libanswers.com/load_chat.php?hash=17b1fa99b577483a418172851f40a779";
  // eslint-disable-next-line no-undef
  const s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(lc, s);
})();
#+end_src

** Search Bar Sub Menu
*** Package
#+begin_src javascript :noweb-ref imports
import "primo-explore-search-bar-sub-menu";
#+end_src

#+begin_src javascript :noweb-ref packages
"searchBarSubMenu",
#+end_src

*** Config
#+begin_src javascript :tangle ./js/components/searchBarSubMenu/searchBarSubMenu.config.js
const SearchBarSubMenuConfig = [
  {
    name: "How To Search",
    description: "Learn how to use the library search box",
    action: "https://libraryguides.unh.edu/librarysearchbox_unhdurham",
    icon: {
      set: "action",
      icon: "ic_info_24px",
    },
    // eslint-disable-next-line camelcase
    show_xs: true,
    cssClasses: "button-over-light",
  },
  {
    name: "Citation Search",
    description: "Search with citation information, DOI, or other identifiers",
    action:
      "https://unh.primo.exlibrisgroup.com/discovery/citationlinker?vid=01USNH_UNH:MAIN",
    icon: {
      set: "editor",
      icon: "ic_format_quote_24px",
    },
    // eslint-disable-next-line camelcase
    show_xs: true,
    cssClasses: "button-over-light",
  },
  {
    name: "Ask a Librarian",
    description: "Get help with your research",
    action: "https://library.unh.edu/research-support/ask-librarian",
    icon: {
      set: "action",
      icon: "ic_question_answer_24px",
    },
    // eslint-disable-next-line camelcase
    show_xs: true,
    cssClasses: "button-over-light",
  },
  {
    name: "Hours",
    description: "Library hours",
    action: "https://library.unh.edu/about-us/hours",
    icon: {
      set: "action",
      icon: "ic_schedule_24px",
    },
    // eslint-disable-next-line camelcase
    show_xs: true,
    cssClasses: "button-over-light",
  },
  {
    name: "Locations",
    description: "Library locations",
    action: "https://library.unh.edu/locations",
    icon: {
      set: "maps",
      icon: "ic_place_24px",
    },
    // eslint-disable-next-line camelcase
    show_xs: true,
    cssClasses: "button-over-light",
  },
  {
    name: "UNH Law Library",
    description: "Search the Law Library",
    action:
      "https://unh.primo.exlibrisgroup.com/discovery/search?vid=01USNH_UNH:LAW",
    icon: {
      set: "action",
      icon: "ic_search_24px",
    },
    // eslint-disable-next-line camelcase
    show_xs: true,
    cssClasses: "button-over-light",
  },
  {
    name: "UNH Manchester Library",
    description: "Search the Manchester Library",
    action:
      "https://unh.primo.exlibrisgroup.com/discovery/search?vid=01USNH_UNH:MANCH",
    icon: {
      set: "action",
      icon: "ic_search_24px",
    },
    // eslint-disable-next-line camelcase
    show_xs: true,
    cssClasses: "button-over-light",
  },
];

export default SearchBarSubMenuConfig;

#+end_src

#+begin_src javascript :noweb-ref configuration
import SearchBarSubMenuConfig from "./components/searchBarSubMenu/searchBarSubMenu.config";
#+end_src

#+begin_src javascript :noweb-ref constants
.constant("searchBarSubMenuItems", SearchBarSubMenuConfig)
#+end_src

*** Component
#+begin_src javascript :tangle ./js/components/searchBarSubMenu/searchBarSubMenu.component.js
const SearchBarSubMenuComponent = `<search-bar-sub-menu></search-bar-sub-menu>`;

export default SearchBarSubMenuComponent;

#+end_src

** Unpaywall
*** Package
#+begin_src javascript :noweb-ref imports
import "primo-explore-unpaywall";
#+end_src

#+begin_src javascript :noweb-ref packages
"bulibUnpaywall",
#+end_src

*** Config
#+begin_src javascript :noweb-ref configuration
import UnpaywallConfig from "./components/unpaywall/unpaywall.config";
#+end_src

#+begin_src javascript :noweb-ref constants
.constant("unpaywallConfig", UnpaywallConfig)
#+end_src

*** Component
#+begin_src javascript :tangle ./js/components/unpaywall/unpaywall.component.js
const UnpaywallComponent = `<bulib-unpaywall></bulib-unpaywall>`;

export default UnpaywallComponent;

#+end_src

** Directives
*** prm-search-bar-after
#+begin_src javascript :tangle ./js/directives/prmSearchBarAfter.directive.js
import SearchBarSubMenuComponent from "../components/searchBarSubMenu/searchBarSubMenu.component";

const PRMSearchBarAfterDirective = {
  template: SearchBarSubMenuComponent,
};

export default PRMSearchBarAfterDirective;

#+end_src

#+begin_src javascript :noweb-ref directives
import PRMSearchBarAfterDirective from "./directives/prmSearchBarAfter.directive";
#+end_src

#+begin_src javascript :noweb-ref components
.component("prmSearchBarAfter", PRMSearchBarAfterDirective)
#+end_src

*** prm-search-result-availability-line-after
#+begin_src javascript :tangle ./js/directives/prmSearchResultAvailabilityLineAfter.directive.js
import UnpaywallComponent from "../components/unpaywall/unpaywall.component";

const PRMSearchResultAvailabilityLineAfterDirective = {
  template: UnpaywallComponent,
};

export default PRMSearchResultAvailabilityLineAfterDirective;

#+end_src

#+begin_src javascript :noweb-ref directives
import PRMSearchResultAvailabilityLineAfterDirective from "./directives/prmSearchResultAvailabilityLineAfter.directive";
#+end_src

#+begin_src javascript :noweb-ref components
.component(
    "prmSearchResultAvailabilityLineAfter",
    PRMSearchResultAvailabilityLineAfterDirective
  )
#+end_src

* Troubleshooting
# Common issues and their solution, or places to look for help.
