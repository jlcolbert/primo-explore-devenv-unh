{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@orbis-cascade/primo-explore-external-search/index.js","node_modules/@orbis-cascade/primo-explore-external-search/js/external-search.module.js","node_modules/primo-explore-search-bar-sub-menu/dist/index.js","node_modules/primo-explore-unpaywall/src/unpaywall.module.js","primo-explore/custom/01USNH_UNH-LAW/js/components/externalSearch/externalSearch.config.js","primo-explore/custom/01USNH_UNH-LAW/js/components/searchBarSubMenu/searchBarSubMenu.component.js","primo-explore/custom/01USNH_UNH-LAW/js/components/searchBarSubMenu/searchBarSubMenu.config.js","primo-explore/custom/01USNH_UNH-LAW/js/components/unpaywall/unpaywall.component.js","primo-explore/custom/01USNH_UNH-LAW/js/components/unpaywall/unpaywall.config.js","primo-explore/custom/01USNH_UNH-LAW/js/directives/prmSearchBarAfter.directive.js","primo-explore/custom/01USNH_UNH-LAW/js/directives/prmSearchResultAvailabilityLineAfter.directive.js","primo-explore/custom/01USNH_UNH-LAW/js/main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","value","component","bindings","parentCtrl","controller","externalSearch","this","$onInit","setController","addExtSearch","getController","template","$scope","$location","searchTargets","name","facetGroup","targets","query","search","filter","pfilter","queries","Object","prototype","toString","filters","factory","prmFacetCtrl","xx","checkExist","setInterval","facetService","results","unshift","displayedType","limitCount","facetGroupCollapsed","values","undefined","clearInterval","self","m","items","translate","replace","goToUrl","window","open","d","defineProperty","enumerable","get","Symbol","toStringTag","__esModule","create","bind","default","hasOwnProperty","s","l","define","amd","primoExploreCustomSearchBarSubMenu","$http","$injector","unpaywallConfig","modules","has","email","logToConsole","keys","includes","publishEvents","showVersionLabel","showDebugTable","showOnResultsPage","overrideOACheck","logEvent","category","action","label","ga","labelText","imageUrl","imageStyle","logMessageToConsole","message","console","log","logEventToAnalytics","trackLinkClick","doi","listOrFullViewLabel","$postLink","prmSearchResultAvailabilityLine","item","result","onFullView","isFullView","isOverlayFullView","show","apiUrl","addata","pnx","is_oa","encodeURI","then","successResponse","best_oa_location","data","best_oa_link","url","best_oa_version","version","toLowerCase","errorResponse","status","statusText","img","alt","mapping","queryMappings","any","title","creator","subject","isbn","issn","concat","map","part","terms","split","type","string","join","description","icon","set","show_xs","cssClasses","PRMSearchBarAfterDirective","PRMSearchResultAvailabilityLineAfterDirective","_externalSearch","_interopRequireDefault","_searchBarSubMenu","_unpaywall","_prmSearchResultAvailabilityLineAfter","_prmSearchBarAfter","app","lc","document","createElement","async","src","getElementsByTagName","parentNode","insertBefore","constant"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,MAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,MAAAO,KAAA,mBAAAF,EAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,GCAAN,EAAA,kCACAU,EAAAJ,QAAA,kB,yDCDAK,QACAD,OAAA,iBAAA,IACAE,MAAA,gBAAA,IACAC,UAAA,gBAAA,CACAC,SAAA,CAAAC,WAAA,KACAC,WAAA,CAAA,iBAAA,SAAAC,GACAC,KAAAC,QAAA,WACAF,EAAAG,cAAAF,KAAAH,YACAE,EAAAI,oBAIAR,UAAA,sBAAA,CACAG,WAAA,CAAA,iBAAA,SAAAC,GACAC,KAAAC,QAAA,WACAF,EAAAK,iBAAAL,EAAAI,oBAIAR,UAAA,qBAAA,CACAC,SAAA,CAAAC,WAAA,KACAQ,SAAA,qhCAiBAP,WAAA,CAAA,SAAA,YAAA,gBAAA,SAAAQ,EAAAC,EAAAC,GACAR,KAAAC,QAAA,WACAK,EAAAG,KAAAT,KAAAH,WAAAa,WAAAD,KACAH,EAAAK,QAAAH,EACA,IAAAI,EAAAL,EAAAM,SAAAD,MACAE,EAAAP,EAAAM,SAAAE,QACAT,EAAAU,QAAA,mBAAAC,OAAAC,UAAAC,SAAA9B,KAAAuB,GAAAA,IAAAA,GAAA,CAAAA,GACAN,EAAAc,QAAA,mBAAAH,OAAAC,UAAAC,SAAA9B,KAAAyB,GAAAA,IAAAA,GAAA,CAAAA,QAIAO,QAAA,iBAAA,WACA,MAAA,CACAjB,cAAA,WACA,OAAAJ,KAAAsB,eAAA,GAEApB,cAAA,SAAAJ,GACAE,KAAAsB,aAAAxB,GAEAK,aAAA,WACA,IAAAoB,EAAAvB,KACAwB,EAAAC,YAAA,WAEAF,EAAAD,aAAAI,aAAAC,QAAA,IAAA,mBAAAJ,EAAAD,aAAAI,aAAAC,QAAA,GAAAlB,OACA,oBAAAc,EAAAD,aAAAI,aAAAC,QAAAlB,MACAc,EAAAD,aAAAI,aAAAC,QAAAC,QAAA,CACAnB,KAAA,kBACAoB,cAAA,QACAC,WAAA,EACAC,qBAAA,EACAC,YAAAC,IAGAC,cAAAV,KAEA,U,uBCzEA,IAAAjD,EAAAE,EAAAF,EAAA,oBAAA4D,KAAAA,KAAAnC,KAAAvB,EAAA,WAAA,OAAAA,EAAA,GAAAD,EAAA4D,EAAA7D,EAAA,CAAA,SAAAA,EAAAE,EAAAD,GAAAA,EAAA,GAAAD,EAAAa,QAAA,oBAAA,SAAAb,EAAAE,EAAAD,gBAAAA,EAAAF,EAAAG,GAAAgB,QAAAD,OAAA,mBAAA,IAAAM,WAAA,6BAAA,CAAA,wBAAA,SAAA,UAAA,SAAAvB,EAAAE,EAAAD,GAAAwB,KAAAC,QAAA,WAAAxB,EAAA4D,MAAA9D,GAAAE,EAAA6D,UAAA,SAAA/D,GAAA,OAAAA,EAAAgE,QAAA,aAAA,SAAAhE,EAAAE,GAAA,OAAAD,EAAA,YAAAA,CAAAC,MAAAA,EAAA+D,QAAA,SAAAjE,GAAAkE,OAAAC,KAAAnE,EAAA,cAAAoB,UAAA,mBAAA,CAAAG,WAAA,6BAAAO,SAAA,uvBAAA7B,EAAAK,EAAAJ,EAAAD,EAAAmE,EAAA,SAAApE,EAAAE,EAAAH,GAAAE,EAAAE,EAAAH,EAAAE,IAAAwC,OAAA2B,eAAArE,EAAAE,EAAA,CAAAoE,YAAA,EAAAC,IAAAxE,KAAAE,EAAAF,EAAA,SAAAC,GAAA,oBAAAwE,QAAAA,OAAAC,aAAA/B,OAAA2B,eAAArE,EAAAwE,OAAAC,YAAA,CAAAtD,MAAA,WAAAuB,OAAA2B,eAAArE,EAAA,aAAA,CAAAmB,OAAA,KAAAlB,EAAAC,EAAA,SAAAF,EAAAE,GAAA,GAAA,EAAAA,IAAAF,EAAAC,EAAAD,IAAA,EAAAE,EAAA,OAAAF,EAAA,GAAA,EAAAE,GAAA,iBAAAF,GAAAA,GAAAA,EAAA0E,WAAA,OAAA1E,EAAA,IAAAD,EAAA2C,OAAAiC,OAAA,MAAA,GAAA1E,EAAAF,EAAAA,GAAA2C,OAAA2B,eAAAtE,EAAA,UAAA,CAAAuE,YAAA,EAAAnD,MAAAnB,IAAA,EAAAE,GAAA,iBAAAF,EAAA,IAAA,IAAAG,KAAAH,EAAAC,EAAAmE,EAAArE,EAAAI,EAAA,SAAAD,GAAA,OAAAF,EAAAE,IAAA0E,KAAA,KAAAzE,IAAA,OAAAJ,GAAAE,EAAAA,EAAA,SAAAD,GAAA,IAAAE,EAAAF,GAAAA,EAAA0E,WAAA,WAAA,OAAA1E,EAAA6E,SAAA,WAAA,OAAA7E,GAAA,OAAAC,EAAAmE,EAAAlE,EAAA,IAAAA,GAAAA,GAAAD,EAAAE,EAAA,SAAAH,EAAAE,GAAA,OAAAwC,OAAAC,UAAAmC,eAAAhE,KAAAd,EAAAE,IAAAD,EAAAW,EAAA,GAAAX,EAAAA,EAAA8E,EAAA,GAAAF,QAAA,SAAA5E,EAAAF,GAAA,GAAAG,EAAAH,GAAA,OAAAG,EAAAH,GAAAc,QAAA,IAAAV,EAAAD,EAAAH,GAAA,CAAAK,EAAAL,EAAAiF,GAAA,EAAAnE,QAAA,IAAA,OAAAb,EAAAD,GAAAe,KAAAX,EAAAU,QAAAV,EAAAA,EAAAU,QAAAZ,GAAAE,EAAA6E,GAAA,EAAA7E,EAAAU,QAAA,IAAAb,EAAAE,GAAA,iBAAAW,GAAA,iBAAAI,EAAAA,EAAAJ,QAAAX,IAAA,mBAAA+E,QAAAA,OAAAC,IAAAD,OAAA,GAAA/E,GAAA,iBAAAW,EAAAA,EAAAsE,mCAAAjF,IAAAF,EAAAmF,mCAAAjF,K,uBCAAgB,QAAAD,OAAA,iBAAA,IACAM,WAAA,sBAAA,CAAA,QAAA,YACA,SAAA6D,EAAAC,GACA,IAAAzB,EAAAnC,KASA6D,EAAA,GACAD,EAAAE,QAGAF,EAAAG,IAAA,qBAEAF,EAAAD,EAAAd,IAAA,oBAEAc,EAAAG,IAAA,uCAEAF,EAAAD,EAAAd,IAAA,sCAKAX,EAAA6B,MAAAH,EAAAG,OAAA,oCAGA7B,EAAA8B,cAAAhD,OAAAiD,KAAAL,GAAAM,SAAA,iBAAAN,EAAAI,aACA9B,EAAAiC,gBAAAnD,OAAAiD,KAAAL,GAAAM,SAAA,kBAAAN,EAAAO,cACAjC,EAAAkC,mBAAApD,OAAAiD,KAAAL,GAAAM,SAAA,qBAAAN,EAAAQ,iBACAlC,EAAAmC,iBAAArD,OAAAiD,KAAAL,GAAAM,SAAA,mBAAAN,EAAAS,eACAnC,EAAAoC,mBAAAtD,OAAAiD,KAAAL,GAAAM,SAAA,sBAAAN,EAAAU,kBACApC,EAAAqC,kBAAAvD,OAAAiD,KAAAL,GAAAM,SAAA,oBAAAN,EAAAW,gBACArC,EAAAsC,SAAAZ,EAAAY,UA7BA,SAAAC,EAAAC,EAAAC,GACAnC,OAAAoC,IAAApC,OAAAoC,GAAA,OAAA,QAAAH,EAAAC,EAAAC,IA+BAzC,EAAA2C,UAAA7D,OAAAiD,KAAAL,GAAAM,SAAA,aAAAN,EAAAiB,UAAA,KACA3C,EAAA4C,SAAA9D,OAAAiD,KAAAL,GAAAM,SAAA,YAAAN,EAAAkB,SAAA,KACA5C,EAAA6C,WAAA/D,OAAAiD,KAAAL,GAAAM,SAAA,cAAAN,EAAAmB,WAAA,4DAGA7C,EAAA8C,oBAAA,SAAAC,GACA/C,EAAA8B,cAAAkB,QAAAC,IAAA,oBAAAF,IAIA/C,EAAAkD,oBAAA,SAAAX,EAAAC,EAAAC,GACAzC,EAAA8C,oBAAA,eAAAP,EAAA,IAAAC,EAAA,oBAAAxC,EAAAiC,cAAA,MACAjC,EAAAiC,eAAAjC,EAAAsC,SAAAC,EAAAC,EAAAC,IAIAzC,EAAAmD,eAAA,SAAAC,GACApD,EAAA8C,oBAAA,gCAAAM,GACApD,EAAAkD,oBAAA,YAAA,QAAAlD,EAAAqD,sBAGArD,EAAAsD,UAAA,WACAtD,EAAAtC,WAAAsC,EAAAuD,gCACA,IAAAC,EAAAxD,EAAAtC,WAAA+F,OAGAC,EAAA7F,KAAAH,WAAAiG,YAAA9F,KAAAH,WAAAkG,kBACA5D,EAAAqD,oBAAAK,EAAA,OAAA,OACA1D,EAAA6D,KAAAH,GAAA1D,EAAAoC,kBAEA,IAEA,IAWA0B,EAXAC,EAAAP,EAAAQ,IAAAD,OACAA,IACAlG,KAAAuF,IAAAW,EAAA7C,eAAA,OAAA6C,EAAAX,IAAA,GAAA,KACAvF,KAAAoG,MAAAF,EAAA7C,eAAA,OAIArD,KAAAuF,OAAAvF,KAAAoG,OAAAjE,EAAAqC,kBAAArC,EAAA6D,OACA7D,EAAAkD,oBAAA,YAAA,WAAAlD,EAAAqD,qBAGAS,EAAA,4BAAA9D,EAAAoD,IAAA,UAAApD,EAAA6B,MACA7B,EAAA8C,oBAAA,2BAAAgB,GACAtC,EAAAb,IAAAuD,UAAAJ,IAAAK,KACA,SAAAC,GAEAC,EAAAD,EAAAE,KAAAD,iBACAA,IAKArE,EAAAuE,aAAAF,EAAAG,KAAA,GACAxE,EAAA8C,oBAAA,uDAAA9C,EAAAoD,IAAA,aAAApD,EAAAuE,cACAvE,EAAAkD,oBAAA,YAAA,cAAAlD,EAAAqD,sBAGAoB,EAAAJ,EAAAK,QAAAC,eAAA,IACA3C,SAAA,WACAhC,EAAAyE,gBAAA,GAEAzE,EAAAyE,gBAAAA,EAAAzC,SAAA,UAAA,YAAA,aAEA,SAAA4C,GACA5E,EAAA8C,oBAAA,kBAAA8B,EAAAC,OAAA,kCAAAD,EAAAE,eAKA,MAAA1I,GACA4D,EAAA8C,oBAAA,wCAAA1G,EAAA2G,cAMAvF,UAAA,iBAAA,CACAb,QAAA,CACA4G,gCAAA,oCAEArF,SAAA,u+CAyBAP,WAAA,yB,gHClJ6B,CAC3B,CACEW,KAAM,0BACNkG,IAAK,6CACLO,IAAK,0DACLC,IAAK,gBAELC,QANF,SAMUpG,EAASI,GACf,IAAMiG,EAAgB,CACpBC,IAAK,KACLC,MAAO,KACPC,QAAS,KACTC,QAAS,KACTC,KAAM,KACNC,KAAM,MAER,IACE,MAAA,eAAAC,OAAsB5G,EACnB6G,IAAI,SAACC,GACJ,IAAMC,EAAQD,EAAKE,MAAM,KACnBC,EAAOZ,EAAcU,EAAM,KAAO,KAClCG,EAASH,EAAM,IAAM,GACrBI,EAAOJ,EAAM,IAAM,GACzB,MAAA,GAAAH,OAAUK,EAAV,KAAAL,OAAkBM,EAAlB,KAAAN,OAA4BO,EAA5B,OAEDA,KAAK,KACR,MAAO5J,GACP,MAAO,MAIb,CACEkC,KAAM,iBACNkG,IACE,8EACFO,IACE,sHACFC,IAAK,sBAELC,QARF,SAQUpG,EAASI,GACf,IACE,OAAOJ,EAAQ6G,IAAI,SAACC,GAAD,OAAUA,EAAKE,MAAM,KAAK,IAAM,KAAIG,KAAK,KAC5D,MAAO5J,GACP,MAAO,Q,gHC3CgB,+C,gHCAA,CAC7B,CACEkC,KAAM,gBACN2H,YAAa,0CACbzD,OAAQ,2DACR0D,KAAM,CACJC,IAAK,SACLD,KAAM,gBAGRE,SAAS,EACTC,WAAY,qBAEd,CACE/H,KAAM,kBACN2H,YAAa,8DACbzD,OACE,mFACF0D,KAAM,CACJC,IAAK,SACLD,KAAM,wBAGRE,SAAS,EACTC,WAAY,qBAEd,CACE/H,KAAM,QACN2H,YAAa,gBACbzD,OAAQ,yCACR0D,KAAM,CACJC,IAAK,SACLD,KAAM,oBAGRE,SAAS,EACTC,WAAY,qBAEd,CACE/H,KAAM,kBACN2H,YAAa,yBACbzD,OACE,0EACF0D,KAAM,CACJC,IAAK,SACLD,KAAM,kBAGRE,SAAS,EACTC,WAAY,qBAEd,CACE/H,KAAM,yBACN2H,YAAa,gCACbzD,OACE,4EACF0D,KAAM,CACJC,IAAK,SACLD,KAAM,kBAGRE,SAAS,EACTC,WAAY,uB,gHC9DQ,uC,gHCAA,CACtBxE,MAAO,sBACPO,mBAAmB,EACnBC,iBAAiB,EACjBH,kBAAkB,EAClBC,gBAAgB,EAChBF,eAAe,EACfU,UAAW,yCACXC,SACE,+GACFC,WAAY,4D,qCCVd,I,oEAEA,IAAMyD,EAA6B,CACjCpI,W,EAHFvB,EAAA,+D,4BAGYsE,S,UAGGqF,G,kGCNf,I,oEAEA,IAAMC,EAAgD,CACpDrI,W,EAHFvB,EAAA,iD,4BAGYsE,S,UAGGsF,G,oFCNf5J,EAAA,gDACAA,EAAA,qCACAA,EAAA,2BAEA,IAAA6J,EAAAC,EAAA9J,EAAA,sDACA+J,EAAAD,EAAA9J,EAAA,0DACAgK,EAAAF,EAAA9J,EAAA,4CACAiK,EAAAH,EAAA9J,EAAA,gEACAkK,EAAAJ,EAAA9J,EAAA,6C,mDAGMmK,EAAMxJ,QAAQD,OAAO,aAAc,CACvC,cACA,iBACA,mBACA,oBAKF,WAEE,IAAM0J,EAAKC,SAASC,cAAc,UAClCF,EAAGjB,KAAO,kBACViB,EAAGG,MAAQ,OACXH,EAAGI,IACD,qFAEF,IAAMhG,EAAI6F,SAASI,qBAAqB,UAAU,GAClDjG,EAAEkG,WAAWC,aAAaP,EAAI5F,GAThC,GAYA2F,EACGS,SAAS,wBAAyBb,EAAAzF,SAClCsG,SAAS,kBAAmBZ,EAAA1F,SAC5BzD,UACC,uCACAoJ,EAAA3F,SAEDzD,UAAU,oBAAqBqJ,EAAA5F,SAC/B1D,MAAM,gBAAiBiJ,EAAAvF","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","require('./js/external-search.module.js')\nmodule.exports = 'externalSearch'\n","angular\n  .module('externalSearch', [])\n  .value('searchTargets', [])\n  .component('prmFacetAfter', {\n      bindings: { parentCtrl: '<' },\n      controller: ['externalSearch', function (externalSearch) {\n        this.$onInit = function () {\n          externalSearch.setController(this.parentCtrl)\n          externalSearch.addExtSearch()\n        }\n      }]\n  })\n  .component('prmPageNavMenuAfter', {\n    controller: ['externalSearch', function (externalSearch) {\n      this.$onInit = function () {\n        if (externalSearch.getController()) externalSearch.addExtSearch()\n      }\n    }]\n  })\n  .component('prmFacetExactAfter', {\n      bindings: { parentCtrl: '<' },\n      template: '<div ng-if=\"name === \\'External Search\\'\">\\\n          <div ng-hide=\"$ctrl.parentCtrl.facetGroup.facetGroupCollapsed\">\\\n              <div class=\"section-content animate-max-height-variable\">\\\n                  <div class=\"md-chips md-chips-wrap\">\\\n                      <div ng-repeat=\"target in targets\" aria-live=\"polite\" class=\"md-chip animate-opacity-and-scale facet-element-marker-local4\">\\\n                          <div class=\"md-chip-content layout-row\" role=\"button\" tabindex=\"0\">\\\n                              <strong dir=\"auto\" title=\"{{ target.name }}\">\\\n                                  <a ng-href=\"{{ target.url + target.mapping(queries, filters) }}\" target=\"_blank\">\\\n                                      <img ng-src=\"{{ target.img }}\" width=\"22\" height=\"22\" alt=\"{{ target.alt }}\" style=\"vertical-align:middle;\"> {{ target.name }}\\\n                                  </a>\\\n                              </strong>\\\n                          </div>\\\n                      </div>\\\n                  </div>\\\n              </div>\\\n          </div>\\\n      </div>',\n      controller: ['$scope', '$location', 'searchTargets', function ($scope, $location, searchTargets) {\n        this.$onInit = function () {\n          $scope.name = this.parentCtrl.facetGroup.name\n          $scope.targets = searchTargets\n          var query = $location.search().query\n          var filter = $location.search().pfilter\n          $scope.queries = Object.prototype.toString.call(query) === '[object Array]' ? query : query ? [query] : false\n          $scope.filters = Object.prototype.toString.call(filter) === '[object Array]' ? filter : filter ? [filter] : false\n        }\n      }]\n  })\n  .factory('externalSearch', function () {\n    return {\n      getController: function () {\n        return this.prmFacetCtrl || false\n      },\n      setController: function (controller) {\n        this.prmFacetCtrl = controller\n      },\n      addExtSearch: function addExtSearch() {\n        var xx=this;\n        var checkExist = setInterval(function() {\n\n           if (xx.prmFacetCtrl.facetService.results[0] && xx.prmFacetCtrl.facetService.results[0].name !=\"External Search\") {\n              if (xx.prmFacetCtrl.facetService.results.name !== 'External Search') {\n                xx.prmFacetCtrl.facetService.results.unshift({\n                  name: 'External Search',\n                  displayedType: 'exact',\n                  limitCount: 0,\n                  facetGroupCollapsed: false,\n                  values: undefined\n                });\n              }\n              clearInterval(checkExist);\n           }\n        }, 100);\n\n      }\n    }\n  })\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.primoExploreCustomSearchBarSubMenu=t():e.primoExploreCustomSearchBarSubMenu=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){n(1),e.exports=\"searchBarSubMenu\"},function(e,t,n){\"use strict\";n.r(t);angular.module(\"searchBarSubMenu\",[]).controller(\"searchBarSubMenuController\",[\"searchBarSubMenuItems\",\"$scope\",\"$filter\",function(e,t,n){this.$onInit=function(){t.items=e},t.translate=function(e){return e.replace(/\\{(.+?)\\}/g,(function(e,t){return n(\"translate\")(t)}))},t.goToUrl=function(e){window.open(e,\"_blank\")}}]).component(\"searchBarSubMenu\",{controller:\"searchBarSubMenuController\",template:'<div class=\"layout-align-end-center layout-row flex search-bar-sub-menu\">\\n  <ul>\\n    <li ng-repeat=\"item in items\">\\n    <button data-href=\"{{ translate(item.action) }}\" aria-label=\"{{ translate(item.description) }}\" ng-click=\"goToUrl(translate(item.action))\" class=\"button-with-icon zero-margin md-button md-small {{item.cssClasses}}\" type=\"button\">\\n      <md-tooltip md-direction=\"bottom\" md-delay=\"500\">{{ translate(item.description) }}</md-tooltip><prm-icon style=\"z-index:1\" icon-type=\"svg\" svg-icon-set=\"{{item.icon.set}}\" icon-definition=\"{{item.icon.icon}}\"></prm-icon>\\n      <span class=\"search-bar-sub-menu-item\" ng-class=\"(item.show_xs) ? \\'\\' : \\'hide-xs\\'\">{{ translate(item.name) }}</span>\\n    </button>\\n    </li>\\n  </ul>\\n</div>\\n'})}]).default}));\n//# sourceMappingURL=index.js.map","angular.module('bulibUnpaywall', [])\n  .controller('unpaywallController', ['$http', '$injector',\n    function($http, $injector) {\n      var self = this;  // 'this' changes scope inside of the $http.get(). 'self' is easier to track/trace\n\n      var LOG_CONFIG_DISCOVERY = false;\n\n      var logEventToGoogleAnalytics = function(category, action, label){\n        if(window.ga){ window.ga('send', 'event', category, action, label); }\n      }\n\n      // obtain custom configuration information from 'unpaywallConfig' or primo-studio constant\n      var unpaywallConfig = {};\n      if ($injector.modules && LOG_CONFIG_DISCOVERY) {\n        console.log($injector.modules);\n      }\n      if ($injector.has('unpaywallConfig')) {\n        if (LOG_CONFIG_DISCOVERY) { console.log(\"'unpaywallConfig' found: \"); }\n        unpaywallConfig = $injector.get('unpaywallConfig');\n      }\n      if ($injector.has('primoExploreUnpaywallStudioConfig')) {\n        if (LOG_CONFIG_DISCOVERY) { console.log(\"'primoExploreUnpaywallStudioConfig' found: \"); }\n        unpaywallConfig = $injector.get('primoExploreUnpaywallStudioConfig');\n      }\n      if (LOG_CONFIG_DISCOVERY) { console.log(unpaywallConfig); }\n\n      // provide 'unpaywall' organization with default value including some context that it's from us (for rate-limiting)\n      self.email = unpaywallConfig.email || \"primo-explore-unpaywall@npmjs.com\";\n\n      // provide additional customization options (with defaults)\n      self.logToConsole = (Object.keys(unpaywallConfig).includes(\"logToConsole\")) ? unpaywallConfig.logToConsole : true;\n      self.publishEvents = (Object.keys(unpaywallConfig).includes(\"publishEvents\")) ? unpaywallConfig.publishEvents : false;\n      self.showVersionLabel = (Object.keys(unpaywallConfig).includes(\"showVersionLabel\")) ? unpaywallConfig.showVersionLabel : false;\n      self.showDebugTable = (Object.keys(unpaywallConfig).includes(\"showDebugTable\")) ? unpaywallConfig.showDebugTable : false;\n      self.showOnResultsPage = (Object.keys(unpaywallConfig).includes(\"showOnResultsPage\")) ? unpaywallConfig.showOnResultsPage : true;\n      self.overrideOACheck = (Object.keys(unpaywallConfig).includes(\"overrideOACheck\")) ? unpaywallConfig.overrideOACheck : false;\n      self.logEvent = unpaywallConfig.logEvent || logEventToGoogleAnalytics;\n\n      // customize UI/UX\n      self.labelText = (Object.keys(unpaywallConfig).includes(\"labelText\")) ? unpaywallConfig.labelText : null;\n      self.imageUrl  = (Object.keys(unpaywallConfig).includes(\"imageUrl\")) ? unpaywallConfig.imageUrl : null;\n      self.imageStyle = (Object.keys(unpaywallConfig).includes(\"imageStyle\")) ? unpaywallConfig.imageStyle : \"height: 24px; vertical-align: bottom; padding-right: 5px;\";\n      \n      // conditionally log to the console\n      self.logMessageToConsole = function (message) {\n        if (self.logToConsole) { console.log(\"bulib-unpaywall) \" + message); }\n      }\n\n      // conditionally call customized 'logEvent'\n      self.logEventToAnalytics = function (category, action, label) {\n        self.logMessageToConsole(\"triggering '\" + category + \".\" + action + \"' event [publish=\" + self.publishEvents + \"].\");\n        if (self.publishEvents) { self.logEvent(category, action, label); }\n      }\n\n      // ng-click response that logs data to google analytics\n      self.trackLinkClick = function (doi) {\n        self.logMessageToConsole(\"unpaywall link used for doi: \" + doi);\n        self.logEventToAnalytics(\"unpaywall\", \"usage\", self.listOrFullViewLabel);\n      };\n\n      self.$postLink = function(){\n        self.parentCtrl = self.prmSearchResultAvailabilityLine\n        var item = self.parentCtrl.result;  // item data is stored in 'prmSearchResultAvailability' (its parent)\n\n        // obtain contextual info on whether you're on the result list of the full item view\n        var onFullView = this.parentCtrl.isFullView || this.parentCtrl.isOverlayFullView;\n        self.listOrFullViewLabel = onFullView ? 'full' : 'list';\n        self.show = onFullView || self.showOnResultsPage;\n\n        try {\n          // obtain doi and open access information from the item PNX (metadata)\n          var addata = item.pnx.addata;\n          if (addata) {\n            this.doi = addata.hasOwnProperty(\"doi\") ? addata.doi[0] : null; //default to first doi (list)\n            this.is_oa = addata.hasOwnProperty(\"oa\"); //true if property is present at all (regardless of value)\n          }\n\n          // if there's a doi and it's not already open access, ask the oadoi.org for an OA link\n          if (this.doi && (!this.is_oa || self.overrideOACheck) && self.show) {\n            self.logEventToAnalytics('unpaywall', 'api-call', self.listOrFullViewLabel);\n\n            // make the actual call to unpaywall API\n            var apiUrl = \"https://api.oadoi.org/v2/\" + self.doi + \"?email=\" + self.email;\n            self.logMessageToConsole(\"-> making 'api-call' to \" + apiUrl);\n            $http.get(encodeURI(apiUrl)).then(\n              function (successResponse) {\n                // if there is a \"best open access location\", save it so it can be used in the template above\n                var best_oa_location = successResponse.data.best_oa_location;\n                if (!best_oa_location) {\n                  return; // can't get what we want from unpaywall. returning with nothing\n                }\n\n                // get the \"best\" content link from this \"best_oa_location\"\n                self.best_oa_link = best_oa_location.url || \"\";\n                self.logMessageToConsole(\"successfully acquired a 'best_oa_location' for doi '\" + self.doi + \"' at url: \" + self.best_oa_link);\n                self.logEventToAnalytics('unpaywall', 'api-success', self.listOrFullViewLabel);\n\n                // optionally display whether the link is to a published, submitted, or accepted version\n                var best_oa_version = best_oa_location.version.toLowerCase() || \"\";\n                if (best_oa_version.includes(\"publish\")) {\n                  self.best_oa_version = \"\";  // users should assume it's the 'published' version without it being clarified in the UI\n                } else {\n                  self.best_oa_version = (best_oa_version.includes(\"submit\")) ? \"Submitted\" : \"Accepted\";\n                }\n              }, function (errorResponse) {\n                self.logMessageToConsole(\"[error status: \" + errorResponse.status + \"] error calling unpaywall API: \" + errorResponse.statusText);\n              }\n            );\n          }\n\n        } catch (e) {\n          self.logMessageToConsole(\"error caught in unpaywallController: \" + e.message);\n        }\n      }\n\n    }\n  ])\n  .component('bulibUnpaywall', {\n    require: {\n      prmSearchResultAvailabilityLine: '^prmSearchResultAvailabilityLine'\n    },\n    template: '\\\n      <unpaywall ng-if=\"$ctrl.show\">\\\n        <div layout=\"flex\" ng-if=\"$ctrl.best_oa_link\" class=\"layout-row\" style=\"margin-top: 5px;\">\\\n          <a ng-click=\"$ctrl.trackLinkClick($ctrl.doi)\" target=\"_blank\" href=\"{{$ctrl.best_oa_link}}\"\\\n            style=\"margin-left: 3px; margin-top: 3px;\" rel=\"noreferrer\">\\\n            \\\n            <img ng-if=\"$ctrl.imageUrl\" src=\"{{$ctrl.imageUrl}}\" alt=\"unpaywall logo\" style=\"{{$ctrl.imageStyle}}\">\\\n            <prm-icon ng-hide=\"$ctrl.imageUrl\" icon-type=\"svg\" svg-icon-set=\"action\" icon-definition=\"ic_lock_open_24px\" style=\"color: #f68212;\"></prm-icon>\\\n            \\\n            <span ng-if=\"$ctrl.labelText\">{{$ctrl.labelText}}</span>\\\n            <span ng-hide=\"$ctrl.labelText\"><strong>Open Access</strong> available via unpaywall</span>\\\n            \\\n            <span ng-if=\"$ctrl.showVersionLabel && $ctrl.best_oa_version\">&nbsp({{$ctrl.best_oa_version}} version)</span>\\\n            <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\\\n          </a>\\\n        </div>\\\n        <div ng-if=\"$ctrl.showDebugTable\" class=\"layout-row\">\\\n          <table>\\\n            <tr><td><strong>doi</strong></td><td>{{$ctrl.doi}}</td></tr>\\\n            <tr><td><strong>is_OA</strong></td><td>{{$ctrl.is_oa}}</td>\\\n            <tr><td><strong>best_oa_link</strong></td><td>{{$ctrl.best_oa_link}}</td></tr>\\\n            <tr><td><strong>best_oa_version</strong></td><td>{{$ctrl.best_oa_version}}</td></tr>\\\n          </table>\\\n        </div>\\\n      </unpaywall>',\n    controller: 'unpaywallController'\n  });","const ExternalSearchConfig = [\n  {\n    name: \"Books & Media Worldwide\",\n    url: \"https://unhlibrary.on.worldcat.org/search?\",\n    img: \"/discovery/custom/01USNH_UNH-MAIN/img/worldcat_logo.png\",\n    alt: \"Worldcat Logo\",\n    // eslint-disable-next-line no-unused-vars\n    mapping(queries, filters) {\n      const queryMappings = {\n        any: \"kw\",\n        title: \"ti\",\n        creator: \"au\",\n        subject: \"su\",\n        isbn: \"bn\",\n        issn: \"n2\",\n      };\n      try {\n        return `queryString=${queries\n          .map((part) => {\n            const terms = part.split(\",\");\n            const type = queryMappings[terms[0]] || \"kw\";\n            const string = terms[2] || \"\";\n            const join = terms[3] || \"\";\n            return `${type}:${string} ${join} `;\n          })\n          .join(\"\")}`;\n      } catch (e) {\n        return \"\";\n      }\n    },\n  },\n  {\n    name: \"Google Scholar\",\n    url:\n      \"https://unh.idm.oclc.org/login?qurl=https%3A//scholar.google.com/scholar?q=\",\n    img:\n      \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/200px-Google_%22G%22_Logo.svg.png\",\n    alt: \"Google Scholar Logo\",\n    // eslint-disable-next-line no-unused-vars\n    mapping(queries, filters) {\n      try {\n        return queries.map((part) => part.split(\",\")[2] || \"\").join(\" \");\n      } catch (e) {\n        return \"\";\n      }\n    },\n  },\n];\n\nexport default ExternalSearchConfig;\n","const SearchBarSubMenuComponent = `<search-bar-sub-menu></search-bar-sub-menu>`;\n\nexport default SearchBarSubMenuComponent;\n","const SearchBarSubMenuConfig = [\n  {\n    name: \"How To Search\",\n    description: \"Learn how to use the library search box\",\n    action: \"https://libraryguides.unh.edu/librarysearchbox_unhdurham\",\n    icon: {\n      set: \"action\",\n      icon: \"ic_info_24px\",\n    },\n    // eslint-disable-next-line camelcase\n    show_xs: true,\n    cssClasses: \"button-over-light\",\n  },\n  {\n    name: \"Citation Search\",\n    description: \"Search with citation information, DOI, or other identifiers\",\n    action:\n      \"https://unh.primo.exlibrisgroup.com/discovery/citationlinker?vid=01USNH_UNH:MAIN\",\n    icon: {\n      set: \"editor\",\n      icon: \"ic_format_quote_24px\",\n    },\n    // eslint-disable-next-line camelcase\n    show_xs: true,\n    cssClasses: \"button-over-light\",\n  },\n  {\n    name: \"Hours\",\n    description: \"Library hours\",\n    action: \"https://library.unh.edu/about-us/hours\",\n    icon: {\n      set: \"action\",\n      icon: \"ic_schedule_24px\",\n    },\n    // eslint-disable-next-line camelcase\n    show_xs: true,\n    cssClasses: \"button-over-light\",\n  },\n  {\n    name: \"UNH Law Library\",\n    description: \"Search the Law Library\",\n    action:\n      \"https://unh.primo.exlibrisgroup.com/discovery/search?vid=01USNH_UNH:LAW\",\n    icon: {\n      set: \"action\",\n      icon: \"ic_search_24px\",\n    },\n    // eslint-disable-next-line camelcase\n    show_xs: true,\n    cssClasses: \"button-over-light\",\n  },\n  {\n    name: \"UNH Manchester Library\",\n    description: \"Search the Manchester Library\",\n    action:\n      \"https://unh.primo.exlibrisgroup.com/discovery/search?vid=01USNH_UNH:MANCH\",\n    icon: {\n      set: \"action\",\n      icon: \"ic_search_24px\",\n    },\n    // eslint-disable-next-line camelcase\n    show_xs: true,\n    cssClasses: \"button-over-light\",\n  },\n];\n\nexport default SearchBarSubMenuConfig;\n","const UnpaywallComponent = `<bulib-unpaywall></bulib-unpaywall>`;\n\nexport default UnpaywallComponent;\n","const UnpaywallConfig = {\n  email: \"jay.colbert@unh.edu\",\n  showOnResultsPage: true,\n  overrideOACheck: false,\n  showVersionLabel: true,\n  showDebugTable: false,\n  publishEvents: false,\n  labelText: \"View Open Access Version via Unpaywall\",\n  imageUrl:\n    \"https://upload.wikimedia.org/wikipedia/commons/archive/2/25/20181007070735%21Open_Access_logo_PLoS_white.svg\",\n  imageStyle: \"width: 20px; padding-right:5px; vertical-align: middle;\",\n};\n\nexport default UnpaywallConfig;\n","import SearchBarSubMenuComponent from \"../components/searchBarSubMenu/searchBarSubMenu.component\";\n\nconst PRMSearchBarAfterDirective = {\n  template: SearchBarSubMenuComponent,\n};\n\nexport default PRMSearchBarAfterDirective;\n","import UnpaywallComponent from \"../components/unpaywall/unpaywall.component\";\n\nconst PRMSearchResultAvailabilityLineAfterDirective = {\n  template: UnpaywallComponent,\n};\n\nexport default PRMSearchResultAvailabilityLineAfterDirective;\n","import \"@orbis-cascade/primo-explore-external-search\";\nimport \"primo-explore-search-bar-sub-menu\";\nimport \"primo-explore-unpaywall\";\n\nimport ExternalSearchConfig from \"./components/externalSearch/externalSearch.config\";\nimport SearchBarSubMenuConfig from \"./components/searchBarSubMenu/searchBarSubMenu.config\";\nimport UnpaywallConfig from \"./components/unpaywall/unpaywall.config\";\nimport PRMSearchResultAvailabilityLineAfterDirective from \"./directives/prmSearchResultAvailabilityLineAfter.directive\";\nimport PRMSearchBarAfterDirective from \"./directives/prmSearchBarAfter.directive\";\n\n// eslint-disable-next-line no-undef\nconst app = angular.module(\"viewCustom\", [\n  \"angularLoad\",\n  \"externalSearch\",\n  \"searchBarSubMenu\",\n  \"bulibUnpaywall\",\n]);\n\n// Adds the chat slide out\n// eslint-disable-next-line func-names\n(function () {\n  // eslint-disable-next-line no-undef\n  const lc = document.createElement(\"script\");\n  lc.type = \"text/javascript\";\n  lc.async = \"true\";\n  lc.src =\n    \"https://law-unh.libanswers.com/load_chat.php?hash=86e52d2b076540265353d6fa933a0022\";\n  // eslint-disable-next-line no-undef\n  const s = document.getElementsByTagName(\"script\")[0];\n  s.parentNode.insertBefore(lc, s);\n})();\n\napp\n  .constant(\"searchBarSubMenuItems\", SearchBarSubMenuConfig)\n  .constant(\"unpaywallConfig\", UnpaywallConfig)\n  .component(\n    \"prmSearchResultAvailabilityLineAfter\",\n    PRMSearchResultAvailabilityLineAfterDirective\n  )\n  .component(\"prmSearchBarAfter\", PRMSearchBarAfterDirective)\n  .value(\"searchTargets\", ExternalSearchConfig);\n"]}