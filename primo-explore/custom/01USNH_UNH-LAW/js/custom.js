!function r(a,o,i){function l(t,e){if(!o[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},a[t][0].call(n.exports,function(e){return l(a[t][1][e]||e)},n,n.exports,r,a,o,i)}return o[t].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,n){e("./js/external-search.module.js"),t.exports="externalSearch"},{"./js/external-search.module.js":2}],2:[function(e,t,n){angular.module("externalSearch",[]).value("searchTargets",[]).component("prmFacetAfter",{bindings:{parentCtrl:"<"},controller:["externalSearch",function(e){this.$onInit=function(){e.setController(this.parentCtrl),e.addExtSearch()}}]}).component("prmPageNavMenuAfter",{controller:["externalSearch",function(e){this.$onInit=function(){e.getController()&&e.addExtSearch()}}]}).component("prmFacetExactAfter",{bindings:{parentCtrl:"<"},template:'<div ng-if="name === \'External Search\'">          <div ng-hide="$ctrl.parentCtrl.facetGroup.facetGroupCollapsed">              <div class="section-content animate-max-height-variable">                  <div class="md-chips md-chips-wrap">                      <div ng-repeat="target in targets" aria-live="polite" class="md-chip animate-opacity-and-scale facet-element-marker-local4">                          <div class="md-chip-content layout-row" role="button" tabindex="0">                              <strong dir="auto" title="{{ target.name }}">                                  <a ng-href="{{ target.url + target.mapping(queries, filters) }}" target="_blank">                                      <img ng-src="{{ target.img }}" width="22" height="22" alt="{{ target.alt }}" style="vertical-align:middle;"> {{ target.name }}                                  </a>                              </strong>                          </div>                      </div>                  </div>              </div>          </div>      </div>',controller:["$scope","$location","searchTargets",function(n,r,a){this.$onInit=function(){n.name=this.parentCtrl.facetGroup.name,n.targets=a;var e=r.search().query,t=r.search().pfilter;n.queries="[object Array]"===Object.prototype.toString.call(e)?e:!!e&&[e],n.filters="[object Array]"===Object.prototype.toString.call(t)?t:!!t&&[t]}}]}).factory("externalSearch",function(){return{getController:function(){return this.prmFacetCtrl||!1},setController:function(e){this.prmFacetCtrl=e},addExtSearch:function(){var e=this,t=setInterval(function(){e.prmFacetCtrl.facetService.results[0]&&"External Search"!=e.prmFacetCtrl.facetService.results[0].name&&("External Search"!==e.prmFacetCtrl.facetService.results.name&&e.prmFacetCtrl.facetService.results.unshift({name:"External Search",displayedType:"exact",limitCount:0,facetGroupCollapsed:!1,values:void 0}),clearInterval(t))},100)}}})},{}],3:[function(e,t,n){var r,a;r="undefined"!=typeof self?self:this,a=function(){return r={},a.m=n=[function(e,t,n){n(1),e.exports="searchBarSubMenu"},function(e,t,n){"use strict";n.r(t),angular.module("searchBarSubMenu",[]).controller("searchBarSubMenuController",["searchBarSubMenuItems","$scope","$filter",function(e,t,n){this.$onInit=function(){t.items=e},t.translate=function(e){return e.replace(/\{(.+?)\}/g,function(e,t){return n("translate")(t)})},t.goToUrl=function(e){window.open(e,"_blank")}}]).component("searchBarSubMenu",{controller:"searchBarSubMenuController",template:'<div class="layout-align-end-center layout-row flex search-bar-sub-menu">\n  <ul>\n    <li ng-repeat="item in items">\n    <button data-href="{{ translate(item.action) }}" aria-label="{{ translate(item.description) }}" ng-click="goToUrl(translate(item.action))" class="button-with-icon zero-margin md-button md-small {{item.cssClasses}}" type="button">\n      <md-tooltip md-direction="bottom" md-delay="500">{{ translate(item.description) }}</md-tooltip><prm-icon style="z-index:1" icon-type="svg" svg-icon-set="{{item.icon.set}}" icon-definition="{{item.icon.icon}}"></prm-icon>\n      <span class="search-bar-sub-menu-item" ng-class="(item.show_xs) ? \'\' : \'hide-xs\'">{{ translate(item.name) }}</span>\n    </button>\n    </li>\n  </ul>\n</div>\n'})}],a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0).default;function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var n,r},"object"==typeof n&&"object"==typeof t?t.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof n?n.primoExploreCustomSearchBarSubMenu=a():r.primoExploreCustomSearchBarSubMenu=a()},{}],4:[function(e,t,n){angular.module("bulibUnpaywall",[]).controller("unpaywallController",["$http","$injector",function(a,e){var o=this,t={};e.modules,e.has("unpaywallConfig")&&(t=e.get("unpaywallConfig")),e.has("primoExploreUnpaywallStudioConfig")&&(t=e.get("primoExploreUnpaywallStudioConfig")),o.email=t.email||"primo-explore-unpaywall@npmjs.com",o.logToConsole=!Object.keys(t).includes("logToConsole")||t.logToConsole,o.publishEvents=!!Object.keys(t).includes("publishEvents")&&t.publishEvents,o.showVersionLabel=!!Object.keys(t).includes("showVersionLabel")&&t.showVersionLabel,o.showDebugTable=!!Object.keys(t).includes("showDebugTable")&&t.showDebugTable,o.showOnResultsPage=!Object.keys(t).includes("showOnResultsPage")||t.showOnResultsPage,o.overrideOACheck=!!Object.keys(t).includes("overrideOACheck")&&t.overrideOACheck,o.logEvent=t.logEvent||function(e,t,n){window.ga&&window.ga("send","event",e,t,n)},o.labelText=Object.keys(t).includes("labelText")?t.labelText:null,o.imageUrl=Object.keys(t).includes("imageUrl")?t.imageUrl:null,o.imageStyle=Object.keys(t).includes("imageStyle")?t.imageStyle:"height: 24px; vertical-align: bottom; padding-right: 5px;",o.logMessageToConsole=function(e){o.logToConsole&&console.log("bulib-unpaywall) "+e)},o.logEventToAnalytics=function(e,t,n){o.logMessageToConsole("triggering '"+e+"."+t+"' event [publish="+o.publishEvents+"]."),o.publishEvents&&o.logEvent(e,t,n)},o.trackLinkClick=function(e){o.logMessageToConsole("unpaywall link used for doi: "+e),o.logEventToAnalytics("unpaywall","usage",o.listOrFullViewLabel)},o.$postLink=function(){o.parentCtrl=o.prmSearchResultAvailabilityLine;var e=o.parentCtrl.result,t=this.parentCtrl.isFullView||this.parentCtrl.isOverlayFullView;o.listOrFullViewLabel=t?"full":"list",o.show=t||o.showOnResultsPage;try{var n,r=e.pnx.addata;r&&(this.doi=r.hasOwnProperty("doi")?r.doi[0]:null,this.is_oa=r.hasOwnProperty("oa")),this.doi&&(!this.is_oa||o.overrideOACheck)&&o.show&&(o.logEventToAnalytics("unpaywall","api-call",o.listOrFullViewLabel),n="https://api.oadoi.org/v2/"+o.doi+"?email="+o.email,o.logMessageToConsole("-> making 'api-call' to "+n),a.get(encodeURI(n)).then(function(e){e=e.data.best_oa_location;e&&(o.best_oa_link=e.url||"",o.logMessageToConsole("successfully acquired a 'best_oa_location' for doi '"+o.doi+"' at url: "+o.best_oa_link),o.logEventToAnalytics("unpaywall","api-success",o.listOrFullViewLabel),(e=e.version.toLowerCase()||"").includes("publish")?o.best_oa_version="":o.best_oa_version=e.includes("submit")?"Submitted":"Accepted")},function(e){o.logMessageToConsole("[error status: "+e.status+"] error calling unpaywall API: "+e.statusText)}))}catch(e){o.logMessageToConsole("error caught in unpaywallController: "+e.message)}}}]).component("bulibUnpaywall",{require:{prmSearchResultAvailabilityLine:"^prmSearchResultAvailabilityLine"},template:'      <unpaywall ng-if="$ctrl.show">        <div layout="flex" ng-if="$ctrl.best_oa_link" class="layout-row" style="margin-top: 5px;">          <a ng-click="$ctrl.trackLinkClick($ctrl.doi)" target="_blank" href="{{$ctrl.best_oa_link}}"            style="margin-left: 3px; margin-top: 3px;" rel="noreferrer">                        <img ng-if="$ctrl.imageUrl" src="{{$ctrl.imageUrl}}" alt="unpaywall logo" style="{{$ctrl.imageStyle}}">            <prm-icon ng-hide="$ctrl.imageUrl" icon-type="svg" svg-icon-set="action" icon-definition="ic_lock_open_24px" style="color: #f68212;"></prm-icon>                        <span ng-if="$ctrl.labelText">{{$ctrl.labelText}}</span>            <span ng-hide="$ctrl.labelText"><strong>Open Access</strong> available via unpaywall</span>                        <span ng-if="$ctrl.showVersionLabel && $ctrl.best_oa_version">&nbsp({{$ctrl.best_oa_version}} version)</span>            <prm-icon external-link icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon>          </a>        </div>        <div ng-if="$ctrl.showDebugTable" class="layout-row">          <table>            <tr><td><strong>doi</strong></td><td>{{$ctrl.doi}}</td></tr>            <tr><td><strong>is_OA</strong></td><td>{{$ctrl.is_oa}}</td>            <tr><td><strong>best_oa_link</strong></td><td>{{$ctrl.best_oa_link}}</td></tr>            <tr><td><strong>best_oa_version</strong></td><td>{{$ctrl.best_oa_version}}</td></tr>          </table>        </div>      </unpaywall>',controller:"unpaywallController"})},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{name:"Books & Media Worldwide",url:"https://unhlibrary.on.worldcat.org/search?",img:"/discovery/custom/01USNH_UNH-LAW/img/worldcat_logo.png",alt:"Worldcat Logo",mapping:function(e,t){var r={any:"kw",title:"ti",creator:"au",subject:"su",isbn:"bn",issn:"n2"};try{return"queryString=".concat(e.map(function(e){var t=e.split(","),n=r[t[0]]||"kw",e=t[2]||"",t=t[3]||"";return"".concat(n,":").concat(e," ").concat(t," ")}).join(""))}catch(e){return""}}},{name:"Google Scholar",url:"https://unh.idm.oclc.org/login?qurl=https%3A//scholar.google.com/scholar?q=",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/200px-Google_%22G%22_Logo.svg.png",alt:"Google Scholar Logo",mapping:function(e,t){try{return e.map(function(e){return e.split(",")[2]||""}).join(" ")}catch(e){return""}}}]},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="<search-bar-sub-menu></search-bar-sub-menu>"},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{name:"How To Search",description:"Learn how to use the library search box",action:"https://libraryguides.unh.edu/librarysearchbox_unhdurham",icon:{set:"action",icon:"ic_info_24px"},show_xs:!0,cssClasses:"button-over-light"},{name:"Citation Search",description:"Search with citation information, DOI, or other identifiers",action:"https://unh.primo.exlibrisgroup.com/discovery/citationlinker?vid=01USNH_UNH:MAIN",icon:{set:"editor",icon:"ic_format_quote_24px"},show_xs:!0,cssClasses:"button-over-light"},{name:"Hours",description:"Library hours",action:"https://library.unh.edu/about-us/hours",icon:{set:"action",icon:"ic_schedule_24px"},show_xs:!0,cssClasses:"button-over-light"},{name:"UNH Law Library",description:"Search the Law Library",action:"https://unh.primo.exlibrisgroup.com/discovery/search?vid=01USNH_UNH:LAW",icon:{set:"action",icon:"ic_search_24px"},show_xs:!0,cssClasses:"button-over-light"},{name:"UNH Manchester Library",description:"Search the Manchester Library",action:"https://unh.primo.exlibrisgroup.com/discovery/search?vid=01USNH_UNH:MANCH",icon:{set:"action",icon:"ic_search_24px"},show_xs:!0,cssClasses:"button-over-light"}]},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="<bulib-unpaywall></bulib-unpaywall>"},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={email:"jay.colbert@unh.edu",showOnResultsPage:!0,overrideOACheck:!1,showVersionLabel:!0,showDebugTable:!1,publishEvents:!1,labelText:"View Open Access Version via Unpaywall",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/archive/2/25/20181007070735%21Open_Access_logo_PLoS_white.svg",imageStyle:"width: 20px; padding-right:5px; vertical-align: middle;"}},{}],10:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a={template:((r=e("../components/searchBarSubMenu/searchBarSubMenu.component"))&&r.__esModule?r:{default:r}).default};n.default=a},{"../components/searchBarSubMenu/searchBarSubMenu.component":6}],11:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a={template:((r=e("../components/unpaywall/unpaywall.component"))&&r.__esModule?r:{default:r}).default};n.default=a},{"../components/unpaywall/unpaywall.component":8}],12:[function(e,t,n){"use strict";e("@orbis-cascade/primo-explore-external-search"),e("primo-explore-search-bar-sub-menu"),e("primo-explore-unpaywall");var r=s(e("./components/externalSearch/externalSearch.config")),a=s(e("./components/searchBarSubMenu/searchBarSubMenu.config")),o=s(e("./components/unpaywall/unpaywall.config")),i=s(e("./directives/prmSearchResultAvailabilityLineAfter.directive")),l=s(e("./directives/prmSearchBarAfter.directive"));function s(e){return e&&e.__esModule?e:{default:e}}e=angular.module("viewCustom",["angularLoad","externalSearch","searchBarSubMenu","bulibUnpaywall"]);!function(){var e=document.createElement("script");e.type="text/javascript",e.async="true",e.src="https://law-unh.libanswers.com/load_chat.php?hash=86e52d2b076540265353d6fa933a0022";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),e.constant("searchBarSubMenuItems",a.default).constant("unpaywallConfig",o.default).component("prmSearchResultAvailabilityLineAfter",i.default).component("prmSearchBarAfter",l.default).value("searchTargets",r.default)},{"./components/externalSearch/externalSearch.config":5,"./components/searchBarSubMenu/searchBarSubMenu.config":7,"./components/unpaywall/unpaywall.config":9,"./directives/prmSearchBarAfter.directive":10,"./directives/prmSearchResultAvailabilityLineAfter.directive":11,"@orbis-cascade/primo-explore-external-search":1,"primo-explore-search-bar-sub-menu":3,"primo-explore-unpaywall":4}]},{},[12]);
//# sourceMappingURL=custom.js.map
