!function i(o,a,r){function l(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return l(o[t][1][e]||e)},n,n.exports,i,o,a,r)}return a[t].exports}for(var s="function"==typeof require&&require,e=0;e<r.length;e++)l(r[e]);return l}({1:[function(e,t,n){"use strict";e("primo-explore-unpaywall"),e("@orbis-cascade/primo-explore-external-search"),e("primo-explore-help-menu"),e("primo-explore-search-bar-sub-menu");var i=l(e("./unpaywall")),o=e("./menuUpdates"),a=e("./menuElements"),r=e("./searchConfig"),e=l(e("./searchBarSubMenu"));function l(e){return e&&e.__esModule?e:{default:e}}angular.module("viewCustom",["angularLoad","bulibUnpaywall","externalSearch","helpMenuContentDisplay","helpMenuTopbar","searchBarSubMenu"]).constant(i.default.name,i.default.config).constant("helpMenuConfig",{logToConsole:!0,publishEvents:!1,enableNotificationIndicator:!0,notificationIndicatorExpiration:12096e5,helpMenuTitle:"Search Menu",updatesLabel:"Search Updates",list_of_updates:o.unh_list_of_updates,entriesLabel:"Help Entries",list_of_elements:a.unh_list_of_elements,helpMenuWidth:500}).constant(e.default.name,e.default.config).component("prmSearchResultAvailabilityLineAfter",{template:"<bulib-unpaywall></bulib-unpaywall>"}).component("prmSearchBarAfter",{template:"<search-bar-sub-menu></search-bar-sub-menu>"}).value("searchTargets",r.searchTargets.config),function(){var e=document.createElement("script");e.type="text/javascript",e.async="true",e.src="https://v2.libanswers.com/load_chat.php?hash=17b1fa99b577483a418172851f40a779";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},{"./menuElements":2,"./menuUpdates":3,"./searchBarSubMenu":4,"./searchConfig":5,"./unpaywall":6,"@orbis-cascade/primo-explore-external-search":7,"primo-explore-help-menu":9,"primo-explore-search-bar-sub-menu":10,"primo-explore-unpaywall":11}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.unh_list_of_elements=[{id:"getting-started",title:"Getting Started",description:"brief static html content with an overview on how to use BULS; links to direct to main BULS help page in WordPress, other pages, and/or other sections of the menu",icon:{code:"description",group:"action"},template:"\n      <p>BU Libraries Search contains articles, books, journals, databases, films, music, dissertations, and other scholarly materials for your research</p>\n      <h2>Search Tips</h2>\n      <code>brief info about title or subject keyword searches</code>\n      <br /><br />\n      <h2>Filtering</h2>\n      <p>Use the filters to limit to one or more material types (books, articles)</p>\n      <p>Use Peer-Reviewed Articles to quickly limit to only these results...</p>\n    "},{id:"tutorials",title:"Tutorials",description:"at a minimum, links to individual videos and a playlist of existing BULS video tutorials (tbd if in Kaltura, WordPress, or youtube); if possible and desired, embed using Kaltura embed code",icon:{code:"shop_two",group:"action"}},{},{id:"whats-in-search",title:"What's in Search?",description:'brief description of material types, "scopes", and collections; may have submenus for each of the above; likely also link out to WordPress page with all PCI collections',icon:{code:"toc",group:"action"}},{id:"didnt-find",title:"Didn't find it?",description:"TBD info about ILL, scope of collections, and problem cases",icon:{code:"swap_horiz",group:"action"}},{},{id:"guides",title:"Guides",description:"info about research, subject, course, and how to guides; how to find in BULS by way of search and related more info links; link out to LibGuides home",icon:{code:"directions",group:"maps"}},{id:"glossary",title:"Glossary",description:"list of common terms (jargon) and definitions",icon:{code:"view_list",group:"action"}},{},{id:"query-builder",title:"Query Builder",description:"placeholder for this, tbd functionality for future development; interim step may just be to have text demonstrating adv query syntax",icon:{code:"find_in_page",group:"action"}},{},{id:"saving-results",title:"Saving Results",description:"information about My Favorites, exporting results, ref managers",icon:{code:"save",group:"content"}},{id:"citing-sources",title:"Citing Sources",description:"likely, but may depend on if including saving results; would have info about ref managers",icon:{code:"create",group:"content"}},{id:"account",title:"Account",description:"information about My Library Account functionality- loans, renewals, policies?; may also highlight or link to My Library Account",icon:{code:"account_box",group:"action"}},{},{id:"for-instructors",title:"For Instructors",description:'may be more "For" sections; will need considerable content work',icon:{code:"info",group:"action"}},{},{id:"ask-us",title:"Ask Us",description:"needs definition; how to point to chat? link to ask a librarian?",icon:{code:"forum",group:"communication"}},{id:"feedback",title:"Feedback",description:'directs to a new form to send feedback in the format of specific questions, e.g. "rate your experience", "did you find what you\'re looking for?", "send us your thoughts on improving search"; will want to clearly differentiate from Ask and reference help, so that patrons who need help soon can get it',icon:{code:"chat",group:"communication"}}]},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.unh_list_of_updates=[{id:"hathitrust-availability",title:"Hathi Trust Availability ETAS",description:"the hathitrust emergency temporary access service (ETAS) allows online reading access to selected materials",icon:{code:"mediation",group:"action"},template:'\n      <h3>About the HathiTrust Emergency Temporary Access Service (ETAS)</h3>\n      <p>The HathiTrust Emergency Temporary Access Service (ETAS) allows current BU students, faculty, and staff to have <strong>online reading access to selected materials that are in the BU Libraries but are currently unavailable due to the closure of the Libraries</strong>.</p>\n      <p>Faculty, students, and staff can access these materials via <a href="http://library.bu.edu/buls">BU Libraries Search</a>. Physical books in BU Libraries that are also available via HathiTrust will have a “<strong>Full Text Available at HathiTrust</strong>” link included in their records in BU Libraries Search.</p>\n      <p class="big-text"><strong>Access to these books is a multi-step process. Please follow the steps outlined below to read the books online.</strong></p>\n      <h3>How to Access Books via HathiTrust</h3>\n      <p>\n        Faculty, students, and staff can access these materials via BU Libraries Search. Physical books in BU Libraries that are also available via\n        HathiTrust will have a “<strong>Full Text Available at HathiTrust</strong>” link included in their records in BU Libraries Search.\n        <em>(Note: This link will also be shown for out-of-copyright items; for those items the link will take you directly to the item without having to follow the steps below.)</em>\n      </p>\n    '},{id:"visiting-the-libraries",title:"Visiting the Libraries",description:"discussion of covid-related changes to bu libraries operation",icon:{code:"business",group:"communication"},template:"\n      <h2>Try Online First</h2>\n      <p>\n        Our building capacity has been significantly reduced to comply with public health guidelines. To avoid long waits, try connecting with us online\n        before you come to our physical locations. We have expanded our online service delivery and may be able to help you without a visit to one of our branches.\n      </p>\n    "}]},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"searchBarSubMenuItems",config:[{name:"Provide Feedback",description:"Provide Feedback",action:"https://nyu.qualtrics.com/jfe/form/SV_blQ3OFOew9vl6Pb?Source=NYU",icon:{set:"communication",icon:"ic_forum_24px"}},{name:"Library Hours",description:"Library Hours",action:"https://guides.nyu.edu/library-hours",icon:{set:"av",icon:"ic_av_timer_24px"}}]}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.searchTargets={config:[{name:"Books & Media Worldwide",url:"https://unhlibrary.on.worldcat.org/search?",img:"./custom/01USNH_UNH-EXPLORE/node_modules/@orbis-cascade/primo-explore-external-search/worldcat-logo.png",alt:"Worldcat Logo",mapping:function(e,t){var n={any:"kw",title:"ti",creator:"au",subject:"su",isbn:"bn",issn:"n2"};try{return"queryString="+e.map(function(e){e=e.split(",");return(n[e[0]]||"kw")+":"+(e[2]||"")+" "+(e[3]||"")+" "}).join("")}catch(e){return""}}},{name:"Google Scholar",url:"https://scholar.google.com/scholar?q=",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/200px-Google_%22G%22_Logo.svg.png",alt:"Google Scholar Logo",mapping:function(e,t){try{return e.map(function(e){return e.split(",")[2]||""}).join(" ")}catch(e){return""}}}]}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"unpaywallConfig",config:[{email:"<your_username>@<your_institution>.edu",showOnResultsPage:!0,overrideOACheck:!1,showVersionLabel:!0,logToConsole:!0,showDebugTable:!1,publishEvents:!1,logEvent:function(e,t,n){window.ga("send","event",e,t,n)},labelText:"View Open Access Version",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/archive/2/25/20181007070735%21Open_Access_logo_PLoS_white.svg",imageStyle:"width: 20px; padding-right:5px; vertical-align: middle;"}]}},{}],7:[function(e,t,n){e("./js/external-search.module.js"),t.exports="externalSearch"},{"./js/external-search.module.js":8}],8:[function(e,t,n){angular.module("externalSearch",[]).value("searchTargets",[]).component("prmFacetAfter",{bindings:{parentCtrl:"<"},controller:["externalSearch",function(e){this.$onInit=function(){e.setController(this.parentCtrl),e.addExtSearch()}}]}).component("prmPageNavMenuAfter",{controller:["externalSearch",function(e){this.$onInit=function(){e.getController()&&e.addExtSearch()}}]}).component("prmFacetExactAfter",{bindings:{parentCtrl:"<"},template:'<div ng-if="name === \'External Search\'">          <div ng-hide="$ctrl.parentCtrl.facetGroup.facetGroupCollapsed">              <div class="section-content animate-max-height-variable">                  <div class="md-chips md-chips-wrap">                      <div ng-repeat="target in targets" aria-live="polite" class="md-chip animate-opacity-and-scale facet-element-marker-local4">                          <div class="md-chip-content layout-row" role="button" tabindex="0">                              <strong dir="auto" title="{{ target.name }}">                                  <a ng-href="{{ target.url + target.mapping(queries, filters) }}" target="_blank">                                      <img ng-src="{{ target.img }}" width="22" height="22" alt="{{ target.alt }}" style="vertical-align:middle;"> {{ target.name }}                                  </a>                              </strong>                          </div>                      </div>                  </div>              </div>          </div>      </div>',controller:["$scope","$location","searchTargets",function(n,i,o){this.$onInit=function(){n.name=this.parentCtrl.facetGroup.name,n.targets=o;var e=i.search().query,t=i.search().pfilter;n.queries="[object Array]"===Object.prototype.toString.call(e)?e:!!e&&[e],n.filters="[object Array]"===Object.prototype.toString.call(t)?t:!!t&&[t]}}]}).factory("externalSearch",function(){return{getController:function(){return this.prmFacetCtrl||!1},setController:function(e){this.prmFacetCtrl=e},addExtSearch:function(){var e=this,t=setInterval(function(){e.prmFacetCtrl.facetService.results[0]&&"External Search"!=e.prmFacetCtrl.facetService.results[0].name&&("External Search"!==e.prmFacetCtrl.facetService.results.name&&e.prmFacetCtrl.facetService.results.unshift({name:"External Search",displayedType:"exact",limitCount:0,facetGroupCollapsed:!1,values:void 0}),clearInterval(t))},100)}}})},{}],9:[function(e,t,n){function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var i,a;a={},o.m=i=[function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);var o='\n  <md-button ng-hide="!entry" class="md-icon-button md-button md-primoExplore-theme md-ink-ripple" ng-click="back()">\n    <prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_arrow_back_24px"\n              aria-label="return to help content list" ></prm-icon>\n  </md-button>\n  <h1>\n    <strong ng-if="helpMenuTitle">{{helpMenuTitle}}</strong>\n    <strong ng-hide="helpMenuTitle">Search Help</strong>\n    <span ng-hide="!entry"> - {{entry.title}}</span>\n  </h1>',a='\n  <div ng-if="entry" id="search-help-menu-content" tabindex="-1">\n    <br />\n    <p ng-if="!entry.template"><em>{{entry.description}}</em></p>\n    <div ng-bind-html="entry.template"></div>\n  </div>\n  <h2 ng-hide="entry || !helpContentUpdates">{{updatesLabel}}</h2>\n  <ul ng-hide="entry || !helpContentUpdates" style="list-style: none; width: 100%; padding-left: 0px;">\n    <hr aria-hidden="true" />\n    <li ng-repeat="item in helpContentUpdates" class="row">\n      <a ng-if="item.id" href="#{{item.id}}">\n        <prm-icon svg-icon-set="{{item.icon.group}}" icon-definition="ic_{{item.icon.code}}_24px"\n                  icon-type="svg" style="padding-right: 10px;"></prm-icon>\n        {{item.title}}\n      </a>\n      <hr ng-if="!item.id" aria-hidden="true" />\n    </li>\n    <hr aria-hidden="true" />\n  </ul>\n  <h2 ng-hide="entry || !helpContentList || !helpContentUpdates">{{entriesLabel}}</h2>\n  <ul ng-hide="entry || !helpContentList" style="list-style: none; width: 100%; padding-left: 0px;">\n    <hr aria-hidden="true" />\n    <li ng-repeat="item in helpContentList" class="row">\n      <a ng-if="item.id" href="#{{item.id}}">\n        <prm-icon svg-icon-set="{{item.icon.group}}" icon-definition="ic_{{item.icon.code}}_24px"\n                  icon-type="svg" style="padding-right: 10px;"></prm-icon>\n        {{item.title}}\n      </a>\n      <hr ng-if="!item.id" aria-hidden="true" />\n    </li>\n    <hr aria-hidden="true" />\n  </ul>',n='\n  <style>\n    help-menu-content-display { font-size: 140%; margin-bottom: 5px;}\n    #help-header { background-color: lightgrey; }\n    #help-content { padding: 0px 25px; }\n    prm-static-page > prm-static > div { display: none; }\n  </style>\n  <div id="help-header" class="md-toolbar-tools">'.concat(o,'</div>\n  <div id="help-content">').concat(a,"</div>"),r="primoExploreHelpMenuStudioConfig",i="help-menu-notification-indicator-dismissed",l={logToConsole:!1,publishEvents:!1,enableNotificationIndicator:!1,notificationIndicatorExpiration:12096e5,updatesLabel:"Search Updates",entriesLabel:"Help Entries",list_of_elements:[{id:"getting-started",title:"Getting Started",description:"brief static html content with an overview on how to use BULS; links to direct to main BULS help page in WordPress, other pages, and/or other sections of the menu",icon:{code:"description",group:"action"},template:"\n      <p>BU Libraries Search contains articles, books, journals, databases, films, music, dissertations, and other scholarly materials for your research</p>\n      <h2>Search Tips</h2>\n      <code>brief info about title or subject keyword searches</code>\n      <br /><br />\n      <h2>Filtering</h2>\n      <p>Use the filters to limit to one or more material types (books, articles)</p>\n      <p>Use Peer-Reviewed Articles to quickly limit to only these results...</p>\n    "},{id:"tutorials",title:"Tutorials",description:"at a minimum, links to individual videos and a playlist of existing BULS video tutorials (tbd if in Kaltura, WordPress, or youtube); if possible and desired, embed using Kaltura embed code",icon:{code:"shop_two",group:"action"}},{},{id:"whats-in-search",title:"What's in Search?",description:'brief description of material types, "scopes", and collections; may have submenus for each of the above; likely also link out to WordPress page with all PCI collections',icon:{code:"toc",group:"action"}},{id:"didnt-find",title:"Didn't find it?",description:"TBD info about ILL, scope of collections, and problem cases",icon:{code:"swap_horiz",group:"action"}},{},{id:"guides",title:"Guides",description:"info about research, subject, course, and how to guides; how to find in BULS by way of search and related more info links; link out to LibGuides home",icon:{code:"directions",group:"maps"}},{id:"glossary",title:"Glossary",description:"list of common terms (jargon) and definitions",icon:{code:"view_list",group:"action"}},{},{id:"query-builder",title:"Query Builder",description:"placeholder for this, tbd functionality for future development; interim step may just be to have text demonstrating adv query syntax",icon:{code:"find_in_page",group:"action"}},{},{id:"saving-results",title:"Saving Results",description:"information about My Favorites, exporting results, ref managers",icon:{code:"save",group:"content"}},{id:"citing-sources",title:"Citing Sources",description:"likely, but may depend on if including saving results; would have info about ref managers",icon:{code:"create",group:"content"}},{id:"account",title:"Account",description:"information about My Library Account functionality- loans, renewals, policies?; may also highlight or link to My Library Account",icon:{code:"account_box",group:"action"}},{},{id:"for-instructors",title:"For Instructors",description:'may be more "For" sections; will need considerable content work',icon:{code:"info",group:"action"}},{},{id:"ask-us",title:"Ask Us",description:"needs definition; how to point to chat? link to ask a librarian?",icon:{code:"forum",group:"communication"}},{id:"feedback",title:"Feedback",description:'directs to a new form to send feedback in the format of specific questions, e.g. "rate your experience", "did you find what you\'re looking for?", "send us your thoughts on improving search"; will want to clearly differentiate from Ask and reference help, so that patrons who need help soon can get it',icon:{code:"chat",group:"communication"}}],helpMenuWidth:500,logMessage:function(e){this.logToConsole&&console.log("bulib-help-menu) "+e)},logEventToAnalytics:function(e,t,n){window.ga&&window.ga("send","event",e,t,n)},logHelpEvent:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location.pathname,n="help-menu";this.logMessage("logging '".concat(n,"' event with action: '").concat(e,"', label:'").concat(t,"'. [publish: ").concat(this.publishEvents,"]")),this.publishEvents&&this.logEventToAnalytics(n,e,t)},isNotificationDismissed:function(){try{var e=window.localStorage.getItem(i);return!(null===e||Date.now()-e>=l.notificationIndicatorExpiration&&(this.logMessage("'".concat(i,"' value is present, but has expired. removing it returning 'not dismissed'")),localStorage.removeItem(i),1))}catch(e){return this.logMessage(e),!0}},showNotificationIndicatorIfNotDismissed:function(){this.enableNotificationIndicator&&!this.isNotificationDismissed()&&(this.logMessage("'enableNotificationIndicator' is true, local storage is enabled, and it's not dismissed, so we'll show the indicator"),document.querySelector("help-menu-topbar").style.setProperty("--notification-indicator-display","inline-block"))},dismissNotificationIndicator:function(){try{this.enableNotificationIndicator&&(window.localStorage.setItem(i,Date.now()),document.querySelector("help-menu-topbar").style.setProperty("--notification-indicator-display","none"),this.logMessage("notification-indicator dismissed"))}catch(e){this.logMessage(e)}},get_entry_by_id:function(e){for(var t=0;t<this.list_of_elements.length;t++)if(this.list_of_elements[t].id===e)return this.list_of_elements[t];for(var n=0;n<this.list_of_updates.length;n++)if(this.list_of_updates[n].id===e)return this.list_of_updates[n];return{}},override_with_config:function(e){e&&Object.keys(e)&&(Object.keys(e).includes("logToConsole")&&(this.logToConsole=e.logToConsole),Object.keys(e).includes("publishEvents")&&(this.publishEvents=e.publishEvents),Object.keys(e).includes("enableNotificationIndicator")&&(this.enableNotificationIndicator=e.enableNotificationIndicator),Object.keys(e).includes("notificationIndicatorExpiration")&&(this.notificationIndicatorExpiration=e.notificationIndicatorExpiration),Object.keys(e).includes("helpMenuWidth")&&(this.helpMenuWidth=e.helpMenuWidth),Object.keys(e).includes("helpMenuTitle")&&(this.helpMenuTitle=e.helpMenuTitle),Object.keys(e).includes("logEventToAnalytics")&&(this.logEventToAnalytics=e.logEventToAnalytics),Object.keys(e).includes("entriesLabel")&&(this.entriesLabel=e.entriesLabel),Object.keys(e).includes("list_of_elements")&&(this.list_of_elements=e.list_of_elements),Object.keys(e).includes("updatesLabel")&&(this.updatesLabel=e.updatesLabel),Object.keys(e).includes("list_of_updates")&&(this.list_of_updates=e.list_of_updates))}},t=function(o,e,a,t,n){var i={};e.has("helpMenuConfig")&&(i=e.get("helpMenuConfig")),e.has(r)&&(i=e.get(r)),o.override_with_config(i),a.helpMenuTitle=o.helpMenuTitle,a.entriesLabel=o.entriesLabel,a.helpContentList=o.list_of_elements,a.updatesLabel=o.updatesLabel,a.helpContentUpdates=o.list_of_updates,a.hide=function(){n.hide()},a.back=function(){a.entry=null,window.top.location.hash=""},a.openItem=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];a.entry=o.get_entry_by_id(e),t&&o.logHelpEvent("select-item",e)},a.setEntryIdFromHash=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=window.location.hash.substring(1);t&&a.openItem(t,e)},a.openHelpInNewWindow=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=window.location.pathname,n="/primo-explore/static-file/help"+window.location.search;e&&(n+="#"+e,t=e);var i=o.helpMenuTitle||"Search Help Menu",e="width=".concat(o.helpMenuWidth,",height=800,resizable=0,location=0,menubar=0,scrollbars=yes");o.logHelpEvent("open-window",t);e=open(n,i,e);e.onload=function(){this.document.title=i},e.addEventListener("hashchange",a.setEntryIdFromHash,!0),a.hide()},t(a.setEntryIdFromHash(!1),10),window.addEventListener("hashchange",a.setEntryIdFromHash,!0),window.addEventListener("openHelpMenuEvent",function(e){e=e.detail||"";o.logMessage("opening helpMenu from 'openHelpMenuEvent' with 'item_id': '"+e+"'"),a.openHelpInNewWindow(e)})};angular.module("helpMenuContentDisplay",[]).constant("helpMenuHelper",l).controller("helpMenuPopupController",["helpMenuHelper","$injector","$scope","$timeout","$mdDialog",t]).component("prmExploreFooterAfter",{template:'\n      <help-menu-content-display>\n        <div ng-if="'.concat(window.location.pathname.includes("/static-file/help"),'">').concat(n,"</div>\n      </help-menu-content-display>"),controller:"helpMenuPopupController"}),angular.module("helpMenuTopbar",["ngMaterial"]).constant("helpMenuHelper",l).controller("helpMenuDialogController",["helpMenuHelper","$injector","$scope","$timeout","$mdDialog",t]).controller("helpMenuTopbarController",["helpMenuHelper","$injector","$mdDialog",function(n,e,i){var t={};e.has("helpMenuConfig")&&(t=e.get("helpMenuConfig")),e.has(r)&&(t=e.get(r)),n.override_with_config(t),n.showNotificationIndicatorIfNotDismissed(),this.openHelpMenu=function(e){var t;n.logHelpEvent("open-dialog",window.location.pathname),n.dismissNotificationIndicator(),i.show({controller:"helpMenuDialogController",template:(t=n.helpMenuWidth,'\n  <md-dialog id="search-help-dialog" aria-label="Search Help Menu Dialog" style="width: '.concat(t,'px;">\n    <form>\n      <md-toolbar>\n        <div class="md-toolbar-tools">\n          ').concat(o,'\n          <span flex></span>\n          <md-button class="md-icon-button md-button md-primoExplore-theme md-ink-ripple" ng-click="hide()">\n            <prm-icon aria-label="Close dialog" icon-type="svg" svg-icon-set="navigation" icon-definition="ic_close_24px"></prm-icon>\n          </md-button>\n        </div>\n      </md-toolbar>\n      <md-dialog-content>\n        <div class="md-dialog-content">').concat(a,'</div>\n      </md-dialog-content>\n      <md-dialog-actions layout="row">\n        <md-button ng-click="openHelpInNewWindow(entry.id)">Open in New Window</md-button>\n      </md-dialog-actions>\n    </form>\n  </md-dialog>')),hasBackdrop:!0,multiple:!1,clickOutsideToClose:!0,fullscreen:!1,focusOnOpen:!0})}}]).component("prmSearchBookmarkFilterAfter",{template:'\n      <help-menu-topbar>\n        <div class="layout-align-center layout-row">\n          <a class="md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple"\n                    aria-label="Open Search Help Menu" ng-click="$ctrl.openHelpMenu($event)"\n                    href="#" title="open help menu">\n            <prm-icon icon-type="svg" svg-icon-set="action" icon-definition="ic_help_24px"></prm-icon>\n          </a>\n        </div>\n        <span class="notification-indicator"></span>\n      </help-menu-topbar>',controller:"helpMenuTopbarController"})}],o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)},{}],10:[function(e,t,n){var i,o;i="undefined"!=typeof self?self:this,o=function(){return i={},o.m=n=[function(e,t,n){n(1),e.exports="searchBarSubMenu"},function(e,t,n){"use strict";n.r(t),angular.module("searchBarSubMenu",[]).controller("searchBarSubMenuController",["searchBarSubMenuItems","$scope","$filter",function(e,t,n){this.$onInit=function(){t.items=e},t.translate=function(e){return e.replace(/\{(.+?)\}/g,function(e,t){return n("translate")(t)})},t.goToUrl=function(e){window.open(e,"_blank")}}]).component("searchBarSubMenu",{controller:"searchBarSubMenuController",template:'<div class="layout-align-end-center layout-row flex search-bar-sub-menu">\n  <ul>\n    <li ng-repeat="item in items">\n    <button data-href="{{ translate(item.action) }}" aria-label="{{ translate(item.description) }}" ng-click="goToUrl(translate(item.action))" class="button-with-icon zero-margin md-button md-small {{item.cssClasses}}" type="button">\n      <md-tooltip md-direction="bottom" md-delay="500">{{ translate(item.description) }}</md-tooltip><prm-icon style="z-index:1" icon-type="svg" svg-icon-set="{{item.icon.set}}" icon-definition="{{item.icon.icon}}"></prm-icon>\n      <span class="search-bar-sub-menu-item" ng-class="(item.show_xs) ? \'\' : \'hide-xs\'">{{ translate(item.name) }}</span>\n    </button>\n    </li>\n  </ul>\n</div>\n'})}],o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0).default;function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i},"object"==typeof n&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof n?n.primoExploreCustomSearchBarSubMenu=o():i.primoExploreCustomSearchBarSubMenu=o()},{}],11:[function(e,t,n){angular.module("bulibUnpaywall",[]).controller("unpaywallController",["$http","$injector",function(o,e){var a=this,t={};e.modules,e.has("unpaywallConfig")&&(t=e.get("unpaywallConfig")),e.has("primoExploreUnpaywallStudioConfig")&&(t=e.get("primoExploreUnpaywallStudioConfig")),a.email=t.email||"primo-explore-unpaywall@npmjs.com",a.logToConsole=!Object.keys(t).includes("logToConsole")||t.logToConsole,a.publishEvents=!!Object.keys(t).includes("publishEvents")&&t.publishEvents,a.showVersionLabel=!!Object.keys(t).includes("showVersionLabel")&&t.showVersionLabel,a.showDebugTable=!!Object.keys(t).includes("showDebugTable")&&t.showDebugTable,a.showOnResultsPage=!Object.keys(t).includes("showOnResultsPage")||t.showOnResultsPage,a.overrideOACheck=!!Object.keys(t).includes("overrideOACheck")&&t.overrideOACheck,a.logEvent=t.logEvent||function(e,t,n){window.ga&&window.ga("send","event",e,t,n)},a.labelText=Object.keys(t).includes("labelText")?t.labelText:null,a.imageUrl=Object.keys(t).includes("imageUrl")?t.imageUrl:null,a.imageStyle=Object.keys(t).includes("imageStyle")?t.imageStyle:"height: 24px; vertical-align: bottom; padding-right: 5px;",a.logMessageToConsole=function(e){a.logToConsole&&console.log("bulib-unpaywall) "+e)},a.logEventToAnalytics=function(e,t,n){a.logMessageToConsole("triggering '"+e+"."+t+"' event [publish="+a.publishEvents+"]."),a.publishEvents&&a.logEvent(e,t,n)},a.trackLinkClick=function(e){a.logMessageToConsole("unpaywall link used for doi: "+e),a.logEventToAnalytics("unpaywall","usage",a.listOrFullViewLabel)},a.$postLink=function(){a.parentCtrl=a.prmSearchResultAvailabilityLine;var e=a.parentCtrl.result,t=this.parentCtrl.isFullView||this.parentCtrl.isOverlayFullView;a.listOrFullViewLabel=t?"full":"list",a.show=t||a.showOnResultsPage;try{var n,i=e.pnx.addata;i&&(this.doi=i.hasOwnProperty("doi")?i.doi[0]:null,this.is_oa=i.hasOwnProperty("oa")),this.doi&&(!this.is_oa||a.overrideOACheck)&&a.show&&(a.logEventToAnalytics("unpaywall","api-call",a.listOrFullViewLabel),n="https://api.oadoi.org/v2/"+a.doi+"?email="+a.email,a.logMessageToConsole("-> making 'api-call' to "+n),o.get(encodeURI(n)).then(function(e){e=e.data.best_oa_location;e&&(a.best_oa_link=e.url||"",a.logMessageToConsole("successfully acquired a 'best_oa_location' for doi '"+a.doi+"' at url: "+a.best_oa_link),a.logEventToAnalytics("unpaywall","api-success",a.listOrFullViewLabel),(e=e.version.toLowerCase()||"").includes("publish")?a.best_oa_version="":a.best_oa_version=e.includes("submit")?"Submitted":"Accepted")},function(e){a.logMessageToConsole("[error status: "+e.status+"] error calling unpaywall API: "+e.statusText)}))}catch(e){a.logMessageToConsole("error caught in unpaywallController: "+e.message)}}}]).component("bulibUnpaywall",{require:{prmSearchResultAvailabilityLine:"^prmSearchResultAvailabilityLine"},template:'      <unpaywall ng-if="$ctrl.show">        <div layout="flex" ng-if="$ctrl.best_oa_link" class="layout-row" style="margin-top: 5px;">          <a ng-click="$ctrl.trackLinkClick($ctrl.doi)" target="_blank" href="{{$ctrl.best_oa_link}}"            style="margin-left: 3px; margin-top: 3px;" rel="noreferrer">                        <img ng-if="$ctrl.imageUrl" src="{{$ctrl.imageUrl}}" alt="unpaywall logo" style="{{$ctrl.imageStyle}}">            <prm-icon ng-hide="$ctrl.imageUrl" icon-type="svg" svg-icon-set="action" icon-definition="ic_lock_open_24px" style="color: #f68212;"></prm-icon>                        <span ng-if="$ctrl.labelText">{{$ctrl.labelText}}</span>            <span ng-hide="$ctrl.labelText"><strong>Open Access</strong> available via unpaywall</span>                        <span ng-if="$ctrl.showVersionLabel && $ctrl.best_oa_version">&nbsp({{$ctrl.best_oa_version}} version)</span>            <prm-icon external-link icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon>          </a>        </div>        <div ng-if="$ctrl.showDebugTable" class="layout-row">          <table>            <tr><td><strong>doi</strong></td><td>{{$ctrl.doi}}</td></tr>            <tr><td><strong>is_OA</strong></td><td>{{$ctrl.is_oa}}</td>            <tr><td><strong>best_oa_link</strong></td><td>{{$ctrl.best_oa_link}}</td></tr>            <tr><td><strong>best_oa_version</strong></td><td>{{$ctrl.best_oa_version}}</td></tr>          </table>        </div>      </unpaywall>',controller:"unpaywallController"})},{}]},{},[1]);
//# sourceMappingURL=custom.js.map
