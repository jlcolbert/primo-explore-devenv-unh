{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/01USNH_UNH-EXPLORE/js/main.js","primo-explore/custom/01USNH_UNH-EXPLORE/js/menuElements.js","primo-explore/custom/01USNH_UNH-EXPLORE/js/menuUpdates.js","primo-explore/custom/01USNH_UNH-EXPLORE/js/searchBarSubMenu.js","primo-explore/custom/01USNH_UNH-EXPLORE/js/searchConfig.js","primo-explore/custom/01USNH_UNH-EXPLORE/js/unpaywall.js","primo-explore/custom/01USNH_UNH-EXPLORE/node_modules/@orbis-cascade/primo-explore-external-search/index.js","primo-explore/custom/01USNH_UNH-EXPLORE/node_modules/@orbis-cascade/primo-explore-external-search/js/external-search.module.js","primo-explore/custom/01USNH_UNH-EXPLORE/node_modules/primo-explore-help-menu/dist/help-menu.js","primo-explore/custom/01USNH_UNH-EXPLORE/node_modules/primo-explore-search-bar-sub-menu/dist/index.js","primo-explore/custom/01USNH_UNH-EXPLORE/node_modules/primo-explore-unpaywall/src/unpaywall.module.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_menuUpdates","_menuElements","_searchConfig","angular","constant","_unpaywall2","default","name","config","logToConsole","publishEvents","enableNotificationIndicator","notificationIndicatorExpiration","helpMenuTitle","updatesLabel","list_of_updates","unh_list_of_updates","entriesLabel","list_of_elements","unh_list_of_elements","helpMenuWidth","_searchBarSubMenu2","component","template","value","searchTargets","lc","document","createElement","type","async","src","s","getElementsByTagName","parentNode","insertBefore","id","title","description","icon","group","action","set","url","img","alt","mapping","queries","filters","query_mappings","any","creator","subject","isbn","issn","map","part","terms","split","join","email","showOnResultsPage","overrideOACheck","showVersionLabel","showDebugTable","logEvent","category","label","window","ga","labelText","imageUrl","imageStyle","bindings","parentCtrl","controller","externalSearch","this","$onInit","setController","addExtSearch","getController","$scope","$location","facetGroup","targets","query","search","filter","pfilter","Object","prototype","toString","factory","prmFacetCtrl","xx","checkExist","setInterval","facetService","results","unshift","displayedType","limitCount","facetGroupCollapsed","values","undefined","clearInterval","l","m","concat","logMessage","console","log","logEventToAnalytics","logHelpEvent","arguments","location","pathname","isNotificationDismissed","localStorage","getItem","Date","now","removeItem","showNotificationIndicatorIfNotDismissed","querySelector","style","setProperty","dismissNotificationIndicator","setItem","get_entry_by_id","override_with_config","keys","includes","has","get","helpContentList","helpContentUpdates","hide","back","entry","top","hash","openItem","setEntryIdFromHash","substring","openHelpInNewWindow","open","onload","addEventListener","detail","openHelpMenu","show","hasBackdrop","multiple","clickOutsideToClose","fullscreen","focusOnOpen","d","defineProperty","enumerable","Symbol","toStringTag","__esModule","create","bind","hasOwnProperty","self","items","translate","replace","goToUrl","define","amd","primoExploreCustomSearchBarSubMenu","$http","$injector","unpaywallConfig","modules","logMessageToConsole","message","trackLinkClick","doi","listOrFullViewLabel","$postLink","prmSearchResultAvailabilityLine","item","result","onFullView","isFullView","isOverlayFullView","apiUrl","addata","pnx","is_oa","encodeURI","then","successResponse","best_oa_location","data","best_oa_link","best_oa_version","version","toLowerCase","errorResponse","status","statusText"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,MAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,MAAAO,KAAA,mBAAAF,EAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,gBCAAN,EAAA,2BACAA,EAAA,gDACAA,EAAA,2BACAA,EAAA,qCAEA,I,IAAAA,EAAA,gBACAW,EAAAX,EAAA,iBACAY,EAAAZ,EAAA,kBACAa,EAAAb,EAAA,kB,IACAA,EAAA,uB,mDAEUc,QAAQJ,OAAO,aAAc,CACrC,cACA,iBACA,iBACA,yBACA,iBACA,qBAGCK,SAASC,EAAAC,QAAgBC,KAAMF,EAAAC,QAAgBE,QAC/CJ,SAAS,iBAAkB,CAC1BK,cAAc,EACdC,eAAe,EAEfC,6BAA6B,EAC7BC,gCAAiC,QAEjCC,cAAe,cACfC,aAAc,iBACdC,gBAAiBf,EAAAgB,oBACjBC,aAAc,eACdC,iBAAkBjB,EAAAkB,qBAElBC,cAAe,MAEhBhB,SACCiB,EAAAf,QAA4BC,KAC5Bc,EAAAf,QAA4BE,QAE7Bc,UAAU,uCAAwC,CACjDC,SAAU,wCAEXD,UAAU,oBAAqB,CAC9BC,SAAU,gDAEXC,MAAM,gBAAiBtB,EAAAuB,cAAcjB,QAIxC,WACE,IAAIkB,EAAKC,SAASC,cAAc,UAChCF,EAAGG,KAAO,kBACVH,EAAGI,MAAQ,OACXJ,EAAGK,IACD,gFACF,IAAIC,EAAIL,SAASM,qBAAqB,UAAU,GAChDD,EAAEE,WAAWC,aAAaT,EAAIM,GAPhC,I,oUClDWrC,EAAAwB,qBAAuB,CAChC,CACEiB,GAAI,kBACJC,MAAO,kBACPC,YACE,qKACFC,KAAM,CAAE9C,KAAM,cAAe+C,MAAO,UACpCjB,SAAA,meAUF,CACEa,GAAI,YACJC,MAAO,YACPC,YACE,+LACFC,KAAM,CAAE9C,KAAM,WAAY+C,MAAO,WAEnC,GACA,CACEJ,GAAI,kBACJC,MAAO,oBACPC,YAAA,2KACAC,KAAM,CAAE9C,KAAM,MAAO+C,MAAO,WAE9B,CACEJ,GAAI,aACJC,MAAO,kBACPC,YAAA,8DACAC,KAAM,CAAE9C,KAAM,aAAc+C,MAAO,WAErC,GACA,CACEJ,GAAI,SACJC,MAAO,SACPC,YAAA,wJACAC,KAAM,CAAE9C,KAAM,aAAc+C,MAAO,SAErC,CACEJ,GAAI,WACJC,MAAO,WACPC,YAAa,gDACbC,KAAM,CAAE9C,KAAM,YAAa+C,MAAO,WAEpC,GACA,CACEJ,GAAI,gBACJC,MAAO,gBACPC,YAAA,uIACAC,KAAM,CAAE9C,KAAM,eAAgB+C,MAAO,WAEvC,GACA,CACEJ,GAAI,iBACJC,MAAO,iBACPC,YACE,kEACFC,KAAM,CAAE9C,KAAM,OAAQ+C,MAAO,YAE/B,CACEJ,GAAI,iBACJC,MAAO,iBACPC,YACE,4FACFC,KAAM,CAAE9C,KAAM,SAAU+C,MAAO,YAEjC,CACEJ,GAAI,UACJC,MAAO,UACPC,YACE,mIACFC,KAAM,CAAE9C,KAAM,cAAe+C,MAAO,WAEtC,GACA,CACEJ,GAAI,kBACJC,MAAO,kBACPC,YAAA,kEACAC,KAAM,CAAE9C,KAAM,OAAQ+C,MAAO,WAE/B,GACA,CACEJ,GAAI,SACJC,MAAO,SACPC,YACE,mEACFC,KAAM,CAAE9C,KAAM,QAAS+C,MAAO,kBAEhC,CACEJ,GAAI,WACJC,MAAO,WACPC,YAAA,gTACAC,KAAM,CAAE9C,KAAM,OAAQ+C,MAAO,oB,qFClGtB7C,EAAAqB,oBAAsB,CAC/B,CACEoB,GAAI,0BACJC,MAAO,gCACPC,YACE,8GACFC,KAAM,CAAE9C,KAAM,YAAa+C,MAAO,UAClCjB,SAAA,83CAaF,CACEa,GAAI,yBACJC,MAAO,yBACPC,YACE,gEACFC,KAAM,CAAE9C,KAAM,WAAY+C,MAAO,iBACjCjB,SAAA,mY,+FC1BW,CACbhB,KAAM,wBACNC,OAAQ,CACN,CACED,KAAM,mBACN+B,YAAa,mBACbG,OACE,mEACFF,KAAM,CACJG,IAAK,gBACLH,KAAM,kBAGV,CACEhC,KAAM,gBACN+B,YAAa,gBACbG,OAAQ,uCACRF,KAAM,CACJG,IAAK,KACLH,KAAM,wB,qFCnBH5C,EAAA8B,cAAgB,CACzBjB,OAAQ,CACN,CACED,KAAM,0BACNoC,IAAK,6CACLC,IACE,0GACFC,IAAK,gBACLC,QAAS,SAAUC,EAASC,GAC1B,IAAMC,EAAiB,CACrBC,IAAK,KACLb,MAAO,KACPc,QAAS,KACTC,QAAS,KACTC,KAAM,KACNC,KAAM,MAER,IACE,MACE,eACAP,EACGQ,IAAI,SAACC,GACAC,EAAQD,EAAKE,MAAM,KAIvB,OAHWT,EAAeQ,EAAM,KAAO,MAGzB,KAFDA,EAAM,IAAM,IAEI,KADlBA,EAAM,IAAM,IACmB,MAE3CE,KAAK,IAEV,MAAO7E,GACP,MAAO,MAIb,CACEyB,KAAM,iBACNoC,IAAK,wCACLC,IACE,sHACFC,IAAK,sBACLC,QAAS,SAAUC,EAASC,GAC1B,IACE,OAAOD,EAAQQ,IAAI,SAACC,GAAD,OAAUA,EAAKE,MAAM,KAAK,IAAM,KAAIC,KAAK,KAC5D,MAAO7E,GACP,MAAO,S,+FC7CF,CACbyB,KAAM,kBACNC,OAAQ,CACN,CACEoD,MAAO,yCACPC,mBAAmB,EACnBC,iBAAiB,EACjBC,kBAAkB,EAClBtD,cAAc,EACduD,gBAAgB,EAChBtD,eAAe,EACfuD,SAAU,SAAUC,EAAUzB,EAAQ0B,GACpCC,OAAOC,GAAG,OAAQ,QAASH,EAAUzB,EAAQ0B,IAE/CG,UAAW,2BACXC,SACE,+GACFC,WAAY,8D,uBCjBlBnF,EAAA,kCACAU,EAAAJ,QAAA,kB,yDCDAQ,QACAJ,OAAA,iBAAA,IACAyB,MAAA,gBAAA,IACAF,UAAA,gBAAA,CACAmD,SAAA,CAAAC,WAAA,KACAC,WAAA,CAAA,iBAAA,SAAAC,GACAC,KAAAC,QAAA,WACAF,EAAAG,cAAAF,KAAAH,YACAE,EAAAI,oBAIA1D,UAAA,sBAAA,CACAqD,WAAA,CAAA,iBAAA,SAAAC,GACAC,KAAAC,QAAA,WACAF,EAAAK,iBAAAL,EAAAI,oBAIA1D,UAAA,qBAAA,CACAmD,SAAA,CAAAC,WAAA,KACAnD,SAAA,qhCAiBAoD,WAAA,CAAA,SAAA,YAAA,gBAAA,SAAAO,EAAAC,EAAA1D,GACAoD,KAAAC,QAAA,WACAI,EAAA3E,KAAAsE,KAAAH,WAAAU,WAAA7E,KACA2E,EAAAG,QAAA5D,EACA,IAAA6D,EAAAH,EAAAI,SAAAD,MACAE,EAAAL,EAAAI,SAAAE,QACAP,EAAAnC,QAAA,mBAAA2C,OAAAC,UAAAC,SAAAhG,KAAA0F,GAAAA,IAAAA,GAAA,CAAAA,GACAJ,EAAAlC,QAAA,mBAAA0C,OAAAC,UAAAC,SAAAhG,KAAA4F,GAAAA,IAAAA,GAAA,CAAAA,QAIAK,QAAA,iBAAA,WACA,MAAA,CACAZ,cAAA,WACA,OAAAJ,KAAAiB,eAAA,GAEAf,cAAA,SAAAJ,GACAE,KAAAiB,aAAAnB,GAEAK,aAAA,WACA,IAAAe,EAAAlB,KACAmB,EAAAC,YAAA,WAEAF,EAAAD,aAAAI,aAAAC,QAAA,IAAA,mBAAAJ,EAAAD,aAAAI,aAAAC,QAAA,GAAA5F,OACA,oBAAAwF,EAAAD,aAAAI,aAAAC,QAAA5F,MACAwF,EAAAD,aAAAI,aAAAC,QAAAC,QAAA,CACA7F,KAAA,kBACA8F,cAAA,QACAC,WAAA,EACAC,qBAAA,EACAC,YAAAC,IAGAC,cAAAV,KAEA,U,uBCzEA,SAAAhH,EAAAE,GAAA,GAAAH,EAAAG,GAAA,OAAAH,EAAAG,GAAAS,QAAA,IAAAV,EAAAF,EAAAG,GAAA,CAAAA,EAAAA,EAAAyH,GAAA,EAAAhH,QAAA,IAAA,OAAAb,EAAAI,GAAAU,KAAAX,EAAAU,QAAAV,EAAAA,EAAAU,QAAAX,GAAAC,EAAA0H,GAAA,EAAA1H,EAAAU,QAAA,IAAAb,EAAAC,EAAAA,EAAA,GAAAC,EAAA4H,EAAA9H,EAAA,CAAA,SAAAA,EAAAC,EAAAC,GAAAF,EAAAa,QAAAX,EAAA,IAAA,SAAAF,EAAAC,EAAAC,gBAAAA,EAAAH,EAAAE,GAAA,IAAAG,EAAA,4eAAAD,EAAA,47CAAA0H,EAAA,4SAAAE,OAAA3H,EAAA,qCAAA2H,OAAA5H,EAAA,UAAAM,EAAA,mCAAAyC,EAAA,6CAAAnD,EAAA,CAAA4B,cAAA,EAAAC,eAAA,EAAAC,6BAAA,EAAAC,gCAAA,QAAAE,aAAA,iBAAAG,aAAA,eAAAC,iBAAA,CAAA,CAAAkB,GAAA,kBAAAC,MAAA,kBAAAC,YAAA,qKAAAC,KAAA,CAAA9C,KAAA,cAAA+C,MAAA,UAAAjB,SAAA,meAAA,CAAAa,GAAA,YAAAC,MAAA,YAAAC,YAAA,+LAAAC,KAAA,CAAA9C,KAAA,WAAA+C,MAAA,WAAA,GAAA,CAAAJ,GAAA,kBAAAC,MAAA,oBAAAC,YAAA,2KAAAC,KAAA,CAAA9C,KAAA,MAAA+C,MAAA,WAAA,CAAAJ,GAAA,aAAAC,MAAA,kBAAAC,YAAA,8DAAAC,KAAA,CAAA9C,KAAA,aAAA+C,MAAA,WAAA,GAAA,CAAAJ,GAAA,SAAAC,MAAA,SAAAC,YAAA,wJAAAC,KAAA,CAAA9C,KAAA,aAAA+C,MAAA,SAAA,CAAAJ,GAAA,WAAAC,MAAA,WAAAC,YAAA,gDAAAC,KAAA,CAAA9C,KAAA,YAAA+C,MAAA,WAAA,GAAA,CAAAJ,GAAA,gBAAAC,MAAA,gBAAAC,YAAA,uIAAAC,KAAA,CAAA9C,KAAA,eAAA+C,MAAA,WAAA,GAAA,CAAAJ,GAAA,iBAAAC,MAAA,iBAAAC,YAAA,kEAAAC,KAAA,CAAA9C,KAAA,OAAA+C,MAAA,YAAA,CAAAJ,GAAA,iBAAAC,MAAA,iBAAAC,YAAA,4FAAAC,KAAA,CAAA9C,KAAA,SAAA+C,MAAA,YAAA,CAAAJ,GAAA,UAAAC,MAAA,UAAAC,YAAA,mIAAAC,KAAA,CAAA9C,KAAA,cAAA+C,MAAA,WAAA,GAAA,CAAAJ,GAAA,kBAAAC,MAAA,kBAAAC,YAAA,kEAAAC,KAAA,CAAA9C,KAAA,OAAA+C,MAAA,WAAA,GAAA,CAAAJ,GAAA,SAAAC,MAAA,SAAAC,YAAA,mEAAAC,KAAA,CAAA9C,KAAA,QAAA+C,MAAA,kBAAA,CAAAJ,GAAA,WAAAC,MAAA,WAAAC,YAAA,gTAAAC,KAAA,CAAA9C,KAAA,OAAA+C,MAAA,mBAAApB,cAAA,IAAA0F,WAAA,SAAAhI,GAAA+F,KAAApE,cAAAsG,QAAAC,IAAA,oBAAAlI,IAAAmI,oBAAA,SAAAnI,EAAAC,EAAAC,GAAAoF,OAAAC,IAAAD,OAAAC,GAAA,OAAA,QAAAvF,EAAAC,EAAAC,IAAAkI,aAAA,SAAApI,GAAA,IAAAC,EAAA,EAAAoI,UAAAtH,aAAA,IAAAsH,UAAA,GAAAA,UAAA,GAAA/C,OAAAgD,SAAAC,SAAArI,EAAA,YAAA6F,KAAAiC,WAAA,YAAAD,OAAA7H,EAAA,0BAAA6H,OAAA/H,EAAA,cAAA+H,OAAA9H,EAAA,iBAAA8H,OAAAhC,KAAAnE,cAAA,MAAAmE,KAAAnE,eAAAmE,KAAAoC,oBAAAjI,EAAAF,EAAAC,IAAAuI,wBAAA,WAAA,IAAA,IAAAxI,EAAAsF,OAAAmD,aAAAC,QAAAxF,GAAA,QAAA,OAAAlD,GAAA2I,KAAAC,MAAA5I,GAAAD,EAAA+B,kCAAAiE,KAAAiC,WAAA,IAAAD,OAAA7E,EAAA,+EAAAuF,aAAAI,WAAA3F,GAAA,IAAA,MAAAlD,GAAA,OAAA+F,KAAAiC,WAAAhI,IAAA,IAAA8I,wCAAA,WAAA/C,KAAAlE,8BAAAkE,KAAAyC,4BAAAzC,KAAAiC,WAAA,wHAAAnF,SAAAkG,cAAA,oBAAAC,MAAAC,YAAA,mCAAA,kBAAAC,6BAAA,WAAA,IAAAnD,KAAAlE,8BAAAyD,OAAAmD,aAAAU,QAAAjG,EAAAyF,KAAAC,OAAA/F,SAAAkG,cAAA,oBAAAC,MAAAC,YAAA,mCAAA,QAAAlD,KAAAiC,WAAA,qCAAA,MAAAhI,GAAA+F,KAAAiC,WAAAhI,KAAAoJ,gBAAA,SAAApJ,GAAA,IAAA,IAAAC,EAAA,EAAAA,EAAA8F,KAAA3D,iBAAArB,OAAAd,IAAA,GAAA8F,KAAA3D,iBAAAnC,GAAAqD,KAAAtD,EAAA,OAAA+F,KAAA3D,iBAAAnC,GAAA,IAAA,IAAAC,EAAA,EAAAA,EAAA6F,KAAA9D,gBAAAlB,OAAAb,IAAA,GAAA6F,KAAA9D,gBAAA/B,GAAAoD,KAAAtD,EAAA,OAAA+F,KAAA9D,gBAAA/B,GAAA,MAAA,IAAAmJ,qBAAA,SAAArJ,GAAAA,GAAA4G,OAAA0C,KAAAtJ,KAAA4G,OAAA0C,KAAAtJ,GAAAuJ,SAAA,kBAAAxD,KAAApE,aAAA3B,EAAA2B,cAAAiF,OAAA0C,KAAAtJ,GAAAuJ,SAAA,mBAAAxD,KAAAnE,cAAA5B,EAAA4B,eAAAgF,OAAA0C,KAAAtJ,GAAAuJ,SAAA,iCAAAxD,KAAAlE,4BAAA7B,EAAA6B,6BAAA+E,OAAA0C,KAAAtJ,GAAAuJ,SAAA,qCAAAxD,KAAAjE,gCAAA9B,EAAA8B,iCAAA8E,OAAA0C,KAAAtJ,GAAAuJ,SAAA,mBAAAxD,KAAAzD,cAAAtC,EAAAsC,eAAAsE,OAAA0C,KAAAtJ,GAAAuJ,SAAA,mBAAAxD,KAAAhE,cAAA/B,EAAA+B,eAAA6E,OAAA0C,KAAAtJ,GAAAuJ,SAAA,yBAAAxD,KAAAoC,oBAAAnI,EAAAmI,qBAAAvB,OAAA0C,KAAAtJ,GAAAuJ,SAAA,kBAAAxD,KAAA5D,aAAAnC,EAAAmC,cAAAyE,OAAA0C,KAAAtJ,GAAAuJ,SAAA,sBAAAxD,KAAA3D,iBAAApC,EAAAoC,kBAAAwE,OAAA0C,KAAAtJ,GAAAuJ,SAAA,kBAAAxD,KAAA/D,aAAAhC,EAAAgC,cAAA4E,OAAA0C,KAAAtJ,GAAAuJ,SAAA,qBAAAxD,KAAA9D,gBAAAjC,EAAAiC,oBAAA3B,EAAA,SAAAN,EAAAC,EAAAC,EAAAE,EAAAD,GAAA,IAAA0H,EAAA,GAAA5H,EAAAuJ,IAAA,oBAAA3B,EAAA5H,EAAAwJ,IAAA,mBAAAxJ,EAAAuJ,IAAA/I,KAAAoH,EAAA5H,EAAAwJ,IAAAhJ,IAAAT,EAAAqJ,qBAAAxB,GAAA3H,EAAA6B,cAAA/B,EAAA+B,cAAA7B,EAAAiC,aAAAnC,EAAAmC,aAAAjC,EAAAwJ,gBAAA1J,EAAAoC,iBAAAlC,EAAA8B,aAAAhC,EAAAgC,aAAA9B,EAAAyJ,mBAAA3J,EAAAiC,gBAAA/B,EAAA0J,KAAA,WAAAzJ,EAAAyJ,QAAA1J,EAAA2J,KAAA,WAAA3J,EAAA4J,MAAA,KAAAxE,OAAAyE,IAAAzB,SAAA0B,KAAA,IAAA9J,EAAA+J,SAAA,SAAAhK,GAAA,IAAAG,IAAA,EAAAiI,UAAAtH,aAAA,IAAAsH,UAAA,KAAAA,UAAA,GAAAnI,EAAA4J,MAAA9J,EAAAoJ,gBAAAnJ,GAAAG,GAAAJ,EAAAoI,aAAA,cAAAnI,IAAAC,EAAAgK,mBAAA,WAAA,IAAAlK,IAAA,EAAAqI,UAAAtH,aAAA,IAAAsH,UAAA,KAAAA,UAAA,GAAApI,EAAAqF,OAAAgD,SAAA0B,KAAAG,UAAA,GAAAlK,GAAAC,EAAA+J,SAAAhK,EAAAD,IAAAE,EAAAkK,oBAAA,WAAA,IAAAnK,EAAA,EAAAoI,UAAAtH,aAAA,IAAAsH,UAAA,GAAAA,UAAA,GAAA,GAAAjI,EAAAkF,OAAAgD,SAAAC,SAAApI,EAAA,kCAAAmF,OAAAgD,SAAA7B,OAAAxG,IAAAE,GAAA,IAAAF,EAAAG,EAAAH,GAAA,IAAA4H,EAAA7H,EAAA+B,eAAA,mBAAAtB,EAAA,SAAAsH,OAAA/H,EAAAsC,cAAA,+DAAAtC,EAAAoI,aAAA,cAAAhI,GAAA8C,EAAAmH,KAAAlK,EAAA0H,EAAApH,GAAAyC,EAAAoH,OAAA,WAAAvE,KAAAlD,SAAAU,MAAAsE,GAAA3E,EAAAqH,iBAAA,aAAArK,EAAAgK,oBAAA,GAAAhK,EAAA0J,QAAAxJ,EAAAF,EAAAgK,oBAAA,GAAA,IAAA5E,OAAAiF,iBAAA,aAAArK,EAAAgK,oBAAA,GAAA5E,OAAAiF,iBAAA,oBAAA,SAAAtK,GAAAG,EAAAH,EAAAuK,QAAA,GAAAxK,EAAAgI,WAAA,8DAAA5H,EAAA,KAAAF,EAAAkK,oBAAAhK,MAAAiB,QAAAJ,OAAA,yBAAA,IAAAK,SAAA,iBAAAvB,GAAA8F,WAAA,0BAAA,CAAA,iBAAA,YAAA,SAAA,WAAA,YAAAvF,IAAAkC,UAAA,wBAAA,CAAAC,SAAA,4DAAAsF,OAAAzC,OAAAgD,SAAAC,SAAAgB,SAAA,qBAAA,MAAAxB,OAAAF,EAAA,8CAAAhC,WAAA,4BAAAxE,QAAAJ,OAAA,iBAAA,CAAA,eAAAK,SAAA,iBAAAvB,GAAA8F,WAAA,2BAAA,CAAA,iBAAA,YAAA,SAAA,WAAA,YAAAvF,IAAAuF,WAAA,2BAAA,CAAA,iBAAA,YAAA,YAAA,SAAA7F,EAAAC,EAAAC,GAAA,IAAA2H,EAAA,GAAA5H,EAAAuJ,IAAA,oBAAA3B,EAAA5H,EAAAwJ,IAAA,mBAAAxJ,EAAAuJ,IAAA/I,KAAAoH,EAAA5H,EAAAwJ,IAAAhJ,IAAAT,EAAAqJ,qBAAAxB,GAAA7H,EAAA8I,0CAAA/C,KAAA0E,aAAA,SAAAxK,GAAA,IAAA4H,EAAA7H,EAAAoI,aAAA,cAAA9C,OAAAgD,SAAAC,UAAAvI,EAAAkJ,+BAAAhJ,EAAAwK,KAAA,CAAA7E,WAAA,2BAAApD,UAAAoF,EAAA7H,EAAAsC,cAAA,6FAAAyF,OAAAF,EAAA,6FAAAE,OAAA3H,EAAA,wZAAA2H,OAAA5H,EAAA,oOAAAwK,aAAA,EAAAC,UAAA,EAAAC,qBAAA,EAAAC,YAAA,EAAAC,aAAA,QAAAvI,UAAA,+BAAA,CAAAC,SAAA,oiBAAAoD,WAAA,+BAAA3F,EAAAI,EAAAL,EAAAC,EAAA8K,EAAA,SAAAhL,EAAAC,EAAAG,GAAAF,EAAAC,EAAAH,EAAAC,IAAA2G,OAAAqE,eAAAjL,EAAAC,EAAA,CAAAiL,YAAA,EAAAzB,IAAArJ,KAAAF,EAAAH,EAAA,SAAAC,GAAA,oBAAAmL,QAAAA,OAAAC,aAAAxE,OAAAqE,eAAAjL,EAAAmL,OAAAC,YAAA,CAAA1I,MAAA,WAAAkE,OAAAqE,eAAAjL,EAAA,aAAA,CAAA0C,OAAA,KAAAxC,EAAAA,EAAA,SAAAF,EAAAC,GAAA,GAAA,EAAAA,IAAAD,EAAAE,EAAAF,IAAA,EAAAC,EAAA,OAAAD,EAAA,GAAA,EAAAC,GAAA,iBAAAD,GAAAA,GAAAA,EAAAqL,WAAA,OAAArL,EAAA,IAAAI,EAAAwG,OAAA0E,OAAA,MAAA,GAAApL,EAAAH,EAAAK,GAAAwG,OAAAqE,eAAA7K,EAAA,UAAA,CAAA8K,YAAA,EAAAxI,MAAA1C,IAAA,EAAAC,GAAA,iBAAAD,EAAA,IAAA,IAAAG,KAAAH,EAAAE,EAAA8K,EAAA5K,EAAAD,EAAA,SAAAF,GAAA,OAAAD,EAAAC,IAAAsL,KAAA,KAAApL,IAAA,OAAAC,GAAAF,EAAAD,EAAA,SAAAD,GAAA,IAAAC,EAAAD,GAAAA,EAAAqL,WAAA,WAAA,OAAArL,EAAAwB,SAAA,WAAA,OAAAxB,GAAA,OAAAE,EAAA8K,EAAA/K,EAAA,IAAAA,GAAAA,GAAAC,EAAAC,EAAA,SAAAH,EAAAC,GAAA,OAAA2G,OAAAC,UAAA2E,eAAA1K,KAAAd,EAAAC,IAAAC,EAAAU,EAAA,GAAAV,EAAAA,EAAAgD,EAAA,I,wBCAA,IAAAlD,EAAAE,EAAAF,EAAA,oBAAAyL,KAAAA,KAAA1F,KAAA7F,EAAA,WAAA,OAAAA,EAAA,GAAAD,EAAA6H,EAAA9H,EAAA,CAAA,SAAAA,EAAAE,EAAAD,GAAAA,EAAA,GAAAD,EAAAa,QAAA,oBAAA,SAAAb,EAAAE,EAAAD,gBAAAA,EAAAF,EAAAG,GAAAmB,QAAAJ,OAAA,mBAAA,IAAA4E,WAAA,6BAAA,CAAA,wBAAA,SAAA,UAAA,SAAA7F,EAAAE,EAAAD,GAAA8F,KAAAC,QAAA,WAAA9F,EAAAwL,MAAA1L,GAAAE,EAAAyL,UAAA,SAAA3L,GAAA,OAAAA,EAAA4L,QAAA,aAAA,SAAA5L,EAAAE,GAAA,OAAAD,EAAA,YAAAA,CAAAC,MAAAA,EAAA2L,QAAA,SAAA7L,GAAAsF,OAAA+E,KAAArK,EAAA,cAAAwC,UAAA,mBAAA,CAAAqD,WAAA,6BAAApD,SAAA,uvBAAAxC,EAAAK,EAAAJ,EAAAD,EAAA+K,EAAA,SAAAhL,EAAAE,EAAAH,GAAAE,EAAAE,EAAAH,EAAAE,IAAA0G,OAAAqE,eAAAjL,EAAAE,EAAA,CAAAgL,YAAA,EAAAzB,IAAA1J,KAAAE,EAAAF,EAAA,SAAAC,GAAA,oBAAAmL,QAAAA,OAAAC,aAAAxE,OAAAqE,eAAAjL,EAAAmL,OAAAC,YAAA,CAAA1I,MAAA,WAAAkE,OAAAqE,eAAAjL,EAAA,aAAA,CAAA0C,OAAA,KAAAzC,EAAAC,EAAA,SAAAF,EAAAE,GAAA,GAAA,EAAAA,IAAAF,EAAAC,EAAAD,IAAA,EAAAE,EAAA,OAAAF,EAAA,GAAA,EAAAE,GAAA,iBAAAF,GAAAA,GAAAA,EAAAqL,WAAA,OAAArL,EAAA,IAAAD,EAAA6G,OAAA0E,OAAA,MAAA,GAAArL,EAAAF,EAAAA,GAAA6G,OAAAqE,eAAAlL,EAAA,UAAA,CAAAmL,YAAA,EAAAxI,MAAA1C,IAAA,EAAAE,GAAA,iBAAAF,EAAA,IAAA,IAAAG,KAAAH,EAAAC,EAAA+K,EAAAjL,EAAAI,EAAA,SAAAD,GAAA,OAAAF,EAAAE,IAAAqL,KAAA,KAAApL,IAAA,OAAAJ,GAAAE,EAAAA,EAAA,SAAAD,GAAA,IAAAE,EAAAF,GAAAA,EAAAqL,WAAA,WAAA,OAAArL,EAAAwB,SAAA,WAAA,OAAAxB,GAAA,OAAAC,EAAA+K,EAAA9K,EAAA,IAAAA,GAAAA,GAAAD,EAAAE,EAAA,SAAAH,EAAAE,GAAA,OAAA0G,OAAAC,UAAA2E,eAAA1K,KAAAd,EAAAE,IAAAD,EAAAW,EAAA,GAAAX,EAAAA,EAAAiD,EAAA,GAAA1B,QAAA,SAAAvB,EAAAF,GAAA,GAAAG,EAAAH,GAAA,OAAAG,EAAAH,GAAAc,QAAA,IAAAV,EAAAD,EAAAH,GAAA,CAAAK,EAAAL,EAAA8H,GAAA,EAAAhH,QAAA,IAAA,OAAAb,EAAAD,GAAAe,KAAAX,EAAAU,QAAAV,EAAAA,EAAAU,QAAAZ,GAAAE,EAAA0H,GAAA,EAAA1H,EAAAU,QAAA,IAAAb,EAAAE,GAAA,iBAAAW,GAAA,iBAAAI,EAAAA,EAAAJ,QAAAX,IAAA,mBAAA4L,QAAAA,OAAAC,IAAAD,OAAA,GAAA5L,GAAA,iBAAAW,EAAAA,EAAAmL,mCAAA9L,IAAAF,EAAAgM,mCAAA9L,K,wBCAAmB,QAAAJ,OAAA,iBAAA,IACA4E,WAAA,sBAAA,CAAA,QAAA,YACA,SAAAoG,EAAAC,GACA,IAAAT,EAAA1F,KASAoG,EAAA,GACAD,EAAAE,QAGAF,EAAA1C,IAAA,qBAEA2C,EAAAD,EAAAzC,IAAA,oBAEAyC,EAAA1C,IAAA,uCAEA2C,EAAAD,EAAAzC,IAAA,sCAKAgC,EAAA3G,MAAAqH,EAAArH,OAAA,oCAGA2G,EAAA9J,cAAAiF,OAAA0C,KAAA6C,GAAA5C,SAAA,iBAAA4C,EAAAxK,aACA8J,EAAA7J,gBAAAgF,OAAA0C,KAAA6C,GAAA5C,SAAA,kBAAA4C,EAAAvK,cACA6J,EAAAxG,mBAAA2B,OAAA0C,KAAA6C,GAAA5C,SAAA,qBAAA4C,EAAAlH,iBACAwG,EAAAvG,iBAAA0B,OAAA0C,KAAA6C,GAAA5C,SAAA,mBAAA4C,EAAAjH,eACAuG,EAAA1G,mBAAA6B,OAAA0C,KAAA6C,GAAA5C,SAAA,sBAAA4C,EAAApH,kBACA0G,EAAAzG,kBAAA4B,OAAA0C,KAAA6C,GAAA5C,SAAA,oBAAA4C,EAAAnH,gBACAyG,EAAAtG,SAAAgH,EAAAhH,UA7BA,SAAAC,EAAAzB,EAAA0B,GACAC,OAAAC,IAAAD,OAAAC,GAAA,OAAA,QAAAH,EAAAzB,EAAA0B,IA+BAoG,EAAAjG,UAAAoB,OAAA0C,KAAA6C,GAAA5C,SAAA,aAAA4C,EAAA3G,UAAA,KACAiG,EAAAhG,SAAAmB,OAAA0C,KAAA6C,GAAA5C,SAAA,YAAA4C,EAAA1G,SAAA,KACAgG,EAAA/F,WAAAkB,OAAA0C,KAAA6C,GAAA5C,SAAA,cAAA4C,EAAAzG,WAAA,4DAGA+F,EAAAY,oBAAA,SAAAC,GACAb,EAAA9J,cAAAsG,QAAAC,IAAA,oBAAAoE,IAIAb,EAAAtD,oBAAA,SAAA/C,EAAAzB,EAAA0B,GACAoG,EAAAY,oBAAA,eAAAjH,EAAA,IAAAzB,EAAA,oBAAA8H,EAAA7J,cAAA,MACA6J,EAAA7J,eAAA6J,EAAAtG,SAAAC,EAAAzB,EAAA0B,IAIAoG,EAAAc,eAAA,SAAAC,GACAf,EAAAY,oBAAA,gCAAAG,GACAf,EAAAtD,oBAAA,YAAA,QAAAsD,EAAAgB,sBAGAhB,EAAAiB,UAAA,WACAjB,EAAA7F,WAAA6F,EAAAkB,gCACA,IAAAC,EAAAnB,EAAA7F,WAAAiH,OAGAC,EAAA/G,KAAAH,WAAAmH,YAAAhH,KAAAH,WAAAoH,kBACAvB,EAAAgB,oBAAAK,EAAA,OAAA,OACArB,EAAAf,KAAAoC,GAAArB,EAAA1G,kBAEA,IAEA,IAWAkI,EAXAC,EAAAN,EAAAO,IAAAD,OACAA,IACAnH,KAAAyG,IAAAU,EAAA1B,eAAA,OAAA0B,EAAAV,IAAA,GAAA,KACAzG,KAAAqH,MAAAF,EAAA1B,eAAA,OAIAzF,KAAAyG,OAAAzG,KAAAqH,OAAA3B,EAAAzG,kBAAAyG,EAAAf,OACAe,EAAAtD,oBAAA,YAAA,WAAAsD,EAAAgB,qBAGAQ,EAAA,4BAAAxB,EAAAe,IAAA,UAAAf,EAAA3G,MACA2G,EAAAY,oBAAA,2BAAAY,GACAhB,EAAAxC,IAAA4D,UAAAJ,IAAAK,KACA,SAAAC,GAEAC,EAAAD,EAAAE,KAAAD,iBACAA,IAKA/B,EAAAiC,aAAAF,EAAA3J,KAAA,GACA4H,EAAAY,oBAAA,uDAAAZ,EAAAe,IAAA,aAAAf,EAAAiC,cACAjC,EAAAtD,oBAAA,YAAA,cAAAsD,EAAAgB,sBAGAkB,EAAAH,EAAAI,QAAAC,eAAA,IACAtE,SAAA,WACAkC,EAAAkC,gBAAA,GAEAlC,EAAAkC,gBAAAA,EAAApE,SAAA,UAAA,YAAA,aAEA,SAAAuE,GACArC,EAAAY,oBAAA,kBAAAyB,EAAAC,OAAA,kCAAAD,EAAAE,eAKA,MAAAhO,GACAyL,EAAAY,oBAAA,wCAAArM,EAAAsM,cAMA9J,UAAA,iBAAA,CACAjC,QAAA,CACAoM,gCAAA,oCAEAlK,SAAA,u+CAyBAoD,WAAA","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import 'primo-explore-unpaywall';\r\nimport '@orbis-cascade/primo-explore-external-search';\r\nimport 'primo-explore-help-menu'; // import './help-menu.js'\r\nimport 'primo-explore-search-bar-sub-menu';\r\n\r\nimport unpaywallConfig from './unpaywall';\r\nimport { unh_list_of_updates } from './menuUpdates';\r\nimport { unh_list_of_elements } from './menuElements';\r\nimport { searchTargets } from './searchConfig';\r\nimport searchBarSubMenuItemsConfig from './searchBarSubMenu';\r\n\r\nvar app = angular.module('viewCustom', [\r\n  'angularLoad',\r\n  'bulibUnpaywall',\r\n  'externalSearch',\r\n  'helpMenuContentDisplay',\r\n  'helpMenuTopbar',\r\n  'searchBarSubMenu',\r\n]);\r\napp\r\n  .constant(unpaywallConfig.name, unpaywallConfig.config)\r\n  .constant('helpMenuConfig', {\r\n    logToConsole: true,\r\n    publishEvents: false,\r\n\r\n    enableNotificationIndicator: true,\r\n    notificationIndicatorExpiration: 1000 * 60 * 60 * 24 * 7 * 2, // 2 weeks\r\n\r\n    helpMenuTitle: 'Search Menu',\r\n    updatesLabel: 'Search Updates',\r\n    list_of_updates: unh_list_of_updates,\r\n    entriesLabel: 'Help Entries',\r\n    list_of_elements: unh_list_of_elements,\r\n\r\n    helpMenuWidth: 500,\r\n  })\r\n  .constant(\r\n    searchBarSubMenuItemsConfig.name,\r\n    searchBarSubMenuItemsConfig.config\r\n  )\r\n  .component('prmSearchResultAvailabilityLineAfter', {\r\n    template: '<bulib-unpaywall></bulib-unpaywall>',\r\n  })\r\n  .component('prmSearchBarAfter', {\r\n    template: '<search-bar-sub-menu></search-bar-sub-menu>',\r\n  })\r\n  .value('searchTargets', searchTargets.config);\r\n\r\n/************************************* BEGIN libchat widget *************************************/\r\n// Adds the chat slide out\r\n(function () {\r\n  var lc = document.createElement('script');\r\n  lc.type = 'text/javascript';\r\n  lc.async = 'true';\r\n  lc.src =\r\n    'https://v2.libanswers.com/load_chat.php?hash=17b1fa99b577483a418172851f40a779';\r\n  var s = document.getElementsByTagName('script')[0];\r\n  s.parentNode.insertBefore(lc, s);\r\n})();\r\n/************************************* END libchat widget ***************************************/\r\n","export let unh_list_of_elements = [\n  {\n    id: 'getting-started',\n    title: 'Getting Started',\n    description:\n      'brief static html content with an overview on how to use BULS; links to direct to main BULS help page in WordPress, other pages, and/or other sections of the menu',\n    icon: { code: 'description', group: 'action' },\n    template: `\n      <p>BU Libraries Search contains articles, books, journals, databases, films, music, dissertations, and other scholarly materials for your research</p>\n      <h2>Search Tips</h2>\n      <code>brief info about title or subject keyword searches</code>\n      <br /><br />\n      <h2>Filtering</h2>\n      <p>Use the filters to limit to one or more material types (books, articles)</p>\n      <p>Use Peer-Reviewed Articles to quickly limit to only these results...</p>\n    `,\n  },\n  {\n    id: 'tutorials',\n    title: 'Tutorials',\n    description:\n      'at a minimum, links to individual videos and a playlist of existing BULS video tutorials (tbd if in Kaltura, WordPress, or youtube); if possible and desired, embed using Kaltura embed code',\n    icon: { code: 'shop_two', group: 'action' },\n  },\n  {}, // DIVIDER, // search-specific\n  {\n    id: 'whats-in-search',\n    title: \"What's in Search?\",\n    description: `brief description of material types, \"scopes\", and collections; may have submenus for each of the above; likely also link out to WordPress page with all PCI collections`,\n    icon: { code: 'toc', group: 'action' },\n  },\n  {\n    id: 'didnt-find',\n    title: \"Didn't find it?\",\n    description: `TBD info about ILL, scope of collections, and problem cases`,\n    icon: { code: 'swap_horiz', group: 'action' },\n  },\n  {}, //DIVIDER, // conceptual\n  {\n    id: 'guides',\n    title: 'Guides',\n    description: `info about research, subject, course, and how to guides; how to find in BULS by way of search and related more info links; link out to LibGuides home`,\n    icon: { code: 'directions', group: 'maps' },\n  },\n  {\n    id: 'glossary',\n    title: 'Glossary',\n    description: 'list of common terms (jargon) and definitions',\n    icon: { code: 'view_list', group: 'action' },\n  },\n  {}, //DIVIDER,\n  {\n    id: 'query-builder',\n    title: 'Query Builder',\n    description: `placeholder for this, tbd functionality for future development; interim step may just be to have text demonstrating adv query syntax`,\n    icon: { code: 'find_in_page', group: 'action' },\n  },\n  {}, //DIVIDER, Search Help\n  {\n    id: 'saving-results',\n    title: 'Saving Results',\n    description:\n      'information about My Favorites, exporting results, ref managers',\n    icon: { code: 'save', group: 'content' },\n  },\n  {\n    id: 'citing-sources',\n    title: 'Citing Sources',\n    description:\n      'likely, but may depend on if including saving results; would have info about ref managers',\n    icon: { code: 'create', group: 'content' },\n  },\n  {\n    id: 'account',\n    title: 'Account',\n    description:\n      'information about My Library Account functionality- loans, renewals, policies?; may also highlight or link to My Library Account',\n    icon: { code: 'account_box', group: 'action' },\n  },\n  {}, //DIVIDER,\n  {\n    id: 'for-instructors',\n    title: 'For Instructors',\n    description: `may be more \"For\" sections; will need considerable content work`,\n    icon: { code: 'info', group: 'action' },\n  },\n  {}, //DIVIDER, communication\n  {\n    id: 'ask-us',\n    title: 'Ask Us',\n    description:\n      'needs definition; how to point to chat? link to ask a librarian?',\n    icon: { code: 'forum', group: 'communication' },\n  },\n  {\n    id: 'feedback',\n    title: 'Feedback',\n    description: `directs to a new form to send feedback in the format of specific questions, e.g. \"rate your experience\", \"did you find what you're looking for?\", \"send us your thoughts on improving search\"; will want to clearly differentiate from Ask and reference help, so that patrons who need help soon can get it`,\n    icon: { code: 'chat', group: 'communication' },\n  },\n];\n","export let unh_list_of_updates = [\n  {\n    id: 'hathitrust-availability',\n    title: 'Hathi Trust Availability ETAS',\n    description:\n      'the hathitrust emergency temporary access service (ETAS) allows online reading access to selected materials',\n    icon: { code: 'mediation', group: 'action' },\n    template: `\n      <h3>About the HathiTrust Emergency Temporary Access Service (ETAS)</h3>\n      <p>The HathiTrust Emergency Temporary Access Service (ETAS) allows current BU students, faculty, and staff to have <strong>online reading access to selected materials that are in the BU Libraries but are currently unavailable due to the closure of the Libraries</strong>.</p>\n      <p>Faculty, students, and staff can access these materials via <a href=\"http://library.bu.edu/buls\">BU Libraries Search</a>. Physical books in BU Libraries that are also available via HathiTrust will have a “<strong>Full Text Available at HathiTrust</strong>” link included in their records in BU Libraries Search.</p>\n      <p class=\"big-text\"><strong>Access to these books is a multi-step process. Please follow the steps outlined below to read the books online.</strong></p>\n      <h3>How to Access Books via HathiTrust</h3>\n      <p>\n        Faculty, students, and staff can access these materials via BU Libraries Search. Physical books in BU Libraries that are also available via\n        HathiTrust will have a “<strong>Full Text Available at HathiTrust</strong>” link included in their records in BU Libraries Search.\n        <em>(Note: This link will also be shown for out-of-copyright items; for those items the link will take you directly to the item without having to follow the steps below.)</em>\n      </p>\n    `,\n  },\n  {\n    id: 'visiting-the-libraries',\n    title: 'Visiting the Libraries',\n    description:\n      'discussion of covid-related changes to bu libraries operation',\n    icon: { code: 'business', group: 'communication' },\n    template: `\n      <h2>Try Online First</h2>\n      <p>\n        Our building capacity has been significantly reduced to comply with public health guidelines. To avoid long waits, try connecting with us online\n        before you come to our physical locations. We have expanded our online service delivery and may be able to help you without a visit to one of our branches.\n      </p>\n    `,\n  },\n];\n","export default {\n  name: 'searchBarSubMenuItems',\n  config: [\n    {\n      name: 'Provide Feedback',\n      description: 'Provide Feedback',\n      action:\n        'https://nyu.qualtrics.com/jfe/form/SV_blQ3OFOew9vl6Pb?Source=NYU',\n      icon: {\n        set: 'communication',\n        icon: 'ic_forum_24px',\n      },\n    },\n    {\n      name: 'Library Hours',\n      description: 'Library Hours',\n      action: 'https://guides.nyu.edu/library-hours',\n      icon: {\n        set: 'av',\n        icon: 'ic_av_timer_24px',\n      },\n    },\n  ],\n};\n","export let searchTargets = {\n  config: [\n    {\n      name: 'Books & Media Worldwide',\n      url: 'https://unhlibrary.on.worldcat.org/search?',\n      img:\n        './custom/01USNH_UNH-EXPLORE/node_modules/@orbis-cascade/primo-explore-external-search/worldcat-logo.png',\n      alt: 'Worldcat Logo',\n      mapping: function (queries, filters) {\n        const query_mappings = {\n          any: 'kw',\n          title: 'ti',\n          creator: 'au',\n          subject: 'su',\n          isbn: 'bn',\n          issn: 'n2',\n        };\n        try {\n          return (\n            'queryString=' +\n            queries\n              .map((part) => {\n                let terms = part.split(',');\n                let type = query_mappings[terms[0]] || 'kw';\n                let string = terms[2] || '';\n                let join = terms[3] || '';\n                return type + ':' + string + ' ' + join + ' ';\n              })\n              .join('')\n          );\n        } catch (e) {\n          return '';\n        }\n      },\n    },\n    {\n      name: 'Google Scholar',\n      url: 'https://scholar.google.com/scholar?q=',\n      img:\n        'https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/200px-Google_%22G%22_Logo.svg.png',\n      alt: 'Google Scholar Logo',\n      mapping: function (queries, filters) {\n        try {\n          return queries.map((part) => part.split(',')[2] || '').join(' ');\n        } catch (e) {\n          return '';\n        }\n      },\n    },\n  ],\n};\n","export default {\n  name: 'unpaywallConfig',\n  config: [\n    {\n      email: '<your_username>@<your_institution>.edu',\n      showOnResultsPage: true,\n      overrideOACheck: false,\n      showVersionLabel: true,\n      logToConsole: true,\n      showDebugTable: false,\n      publishEvents: false,\n      logEvent: function (category, action, label) {\n        window.ga('send', 'event', category, action, label);\n      },\n      labelText: 'View Open Access Version',\n      imageUrl:\n        'https://upload.wikimedia.org/wikipedia/commons/archive/2/25/20181007070735%21Open_Access_logo_PLoS_white.svg',\n      imageStyle: 'width: 20px; padding-right:5px; vertical-align: middle;',\n    },\n  ],\n};\n","require('./js/external-search.module.js')\nmodule.exports = 'externalSearch'\n","angular\n  .module('externalSearch', [])\n  .value('searchTargets', [])\n  .component('prmFacetAfter', {\n      bindings: { parentCtrl: '<' },\n      controller: ['externalSearch', function (externalSearch) {\n        this.$onInit = function () {\n          externalSearch.setController(this.parentCtrl)\n          externalSearch.addExtSearch()\n        }\n      }]\n  })\n  .component('prmPageNavMenuAfter', {\n    controller: ['externalSearch', function (externalSearch) {\n      this.$onInit = function () {\n        if (externalSearch.getController()) externalSearch.addExtSearch()\n      }\n    }]\n  })\n  .component('prmFacetExactAfter', {\n      bindings: { parentCtrl: '<' },\n      template: '<div ng-if=\"name === \\'External Search\\'\">\\\n          <div ng-hide=\"$ctrl.parentCtrl.facetGroup.facetGroupCollapsed\">\\\n              <div class=\"section-content animate-max-height-variable\">\\\n                  <div class=\"md-chips md-chips-wrap\">\\\n                      <div ng-repeat=\"target in targets\" aria-live=\"polite\" class=\"md-chip animate-opacity-and-scale facet-element-marker-local4\">\\\n                          <div class=\"md-chip-content layout-row\" role=\"button\" tabindex=\"0\">\\\n                              <strong dir=\"auto\" title=\"{{ target.name }}\">\\\n                                  <a ng-href=\"{{ target.url + target.mapping(queries, filters) }}\" target=\"_blank\">\\\n                                      <img ng-src=\"{{ target.img }}\" width=\"22\" height=\"22\" alt=\"{{ target.alt }}\" style=\"vertical-align:middle;\"> {{ target.name }}\\\n                                  </a>\\\n                              </strong>\\\n                          </div>\\\n                      </div>\\\n                  </div>\\\n              </div>\\\n          </div>\\\n      </div>',\n      controller: ['$scope', '$location', 'searchTargets', function ($scope, $location, searchTargets) {\n        this.$onInit = function () {\n          $scope.name = this.parentCtrl.facetGroup.name\n          $scope.targets = searchTargets\n          var query = $location.search().query\n          var filter = $location.search().pfilter\n          $scope.queries = Object.prototype.toString.call(query) === '[object Array]' ? query : query ? [query] : false\n          $scope.filters = Object.prototype.toString.call(filter) === '[object Array]' ? filter : filter ? [filter] : false\n        }\n      }]\n  })\n  .factory('externalSearch', function () {\n    return {\n      getController: function () {\n        return this.prmFacetCtrl || false\n      },\n      setController: function (controller) {\n        this.prmFacetCtrl = controller\n      },\n      addExtSearch: function addExtSearch() {\n        var xx=this;\n        var checkExist = setInterval(function() {\n\n           if (xx.prmFacetCtrl.facetService.results[0] && xx.prmFacetCtrl.facetService.results[0].name !=\"External Search\") {\n              if (xx.prmFacetCtrl.facetService.results.name !== 'External Search') {\n                xx.prmFacetCtrl.facetService.results.unshift({\n                  name: 'External Search',\n                  displayedType: 'exact',\n                  limitCount: 0,\n                  facetGroupCollapsed: false,\n                  values: undefined\n                });\n              }\n              clearInterval(checkExist);\n           }\n        }, 100);\n\n      }\n    }\n  })\n","!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=\"\",t(t.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){\"use strict\";t.r(n);var i='\\n  <md-button ng-hide=\"!entry\" class=\"md-icon-button md-button md-primoExplore-theme md-ink-ripple\" ng-click=\"back()\">\\n    <prm-icon icon-type=\"svg\" svg-icon-set=\"navigation\" icon-definition=\"ic_arrow_back_24px\"\\n              aria-label=\"return to help content list\" ></prm-icon>\\n  </md-button>\\n  <h1>\\n    <strong ng-if=\"helpMenuTitle\">{{helpMenuTitle}}</strong>\\n    <strong ng-hide=\"helpMenuTitle\">Search Help</strong>\\n    <span ng-hide=\"!entry\"> - {{entry.title}}</span>\\n  </h1>',o='\\n  <div ng-if=\"entry\" id=\"search-help-menu-content\" tabindex=\"-1\">\\n    <br />\\n    <p ng-if=\"!entry.template\"><em>{{entry.description}}</em></p>\\n    <div ng-bind-html=\"entry.template\"></div>\\n  </div>\\n  <h2 ng-hide=\"entry || !helpContentUpdates\">{{updatesLabel}}</h2>\\n  <ul ng-hide=\"entry || !helpContentUpdates\" style=\"list-style: none; width: 100%; padding-left: 0px;\">\\n    <hr aria-hidden=\"true\" />\\n    <li ng-repeat=\"item in helpContentUpdates\" class=\"row\">\\n      <a ng-if=\"item.id\" href=\"#{{item.id}}\">\\n        <prm-icon svg-icon-set=\"{{item.icon.group}}\" icon-definition=\"ic_{{item.icon.code}}_24px\"\\n                  icon-type=\"svg\" style=\"padding-right: 10px;\"></prm-icon>\\n        {{item.title}}\\n      </a>\\n      <hr ng-if=\"!item.id\" aria-hidden=\"true\" />\\n    </li>\\n    <hr aria-hidden=\"true\" />\\n  </ul>\\n  <h2 ng-hide=\"entry || !helpContentList || !helpContentUpdates\">{{entriesLabel}}</h2>\\n  <ul ng-hide=\"entry || !helpContentList\" style=\"list-style: none; width: 100%; padding-left: 0px;\">\\n    <hr aria-hidden=\"true\" />\\n    <li ng-repeat=\"item in helpContentList\" class=\"row\">\\n      <a ng-if=\"item.id\" href=\"#{{item.id}}\">\\n        <prm-icon svg-icon-set=\"{{item.icon.group}}\" icon-definition=\"ic_{{item.icon.code}}_24px\"\\n                  icon-type=\"svg\" style=\"padding-right: 10px;\"></prm-icon>\\n        {{item.title}}\\n      </a>\\n      <hr ng-if=\"!item.id\" aria-hidden=\"true\" />\\n    </li>\\n    <hr aria-hidden=\"true\" />\\n  </ul>',l='\\n  <style>\\n    help-menu-content-display { font-size: 140%; margin-bottom: 5px;}\\n    #help-header { background-color: lightgrey; }\\n    #help-content { padding: 0px 25px; }\\n    prm-static-page > prm-static > div { display: none; }\\n  </style>\\n  <div id=\"help-header\" class=\"md-toolbar-tools\">'.concat(i,'</div>\\n  <div id=\"help-content\">').concat(o,\"</div>\"),a=\"primoExploreHelpMenuStudioConfig\",s=\"help-menu-notification-indicator-dismissed\",r={logToConsole:!1,publishEvents:!1,enableNotificationIndicator:!1,notificationIndicatorExpiration:12096e5,updatesLabel:\"Search Updates\",entriesLabel:\"Help Entries\",list_of_elements:[{id:\"getting-started\",title:\"Getting Started\",description:\"brief static html content with an overview on how to use BULS; links to direct to main BULS help page in WordPress, other pages, and/or other sections of the menu\",icon:{code:\"description\",group:\"action\"},template:\"\\n      <p>BU Libraries Search contains articles, books, journals, databases, films, music, dissertations, and other scholarly materials for your research</p>\\n      <h2>Search Tips</h2>\\n      <code>brief info about title or subject keyword searches</code>\\n      <br /><br />\\n      <h2>Filtering</h2>\\n      <p>Use the filters to limit to one or more material types (books, articles)</p>\\n      <p>Use Peer-Reviewed Articles to quickly limit to only these results...</p>\\n    \"},{id:\"tutorials\",title:\"Tutorials\",description:\"at a minimum, links to individual videos and a playlist of existing BULS video tutorials (tbd if in Kaltura, WordPress, or youtube); if possible and desired, embed using Kaltura embed code\",icon:{code:\"shop_two\",group:\"action\"}},{},{id:\"whats-in-search\",title:\"What's in Search?\",description:'brief description of material types, \"scopes\", and collections; may have submenus for each of the above; likely also link out to WordPress page with all PCI collections',icon:{code:\"toc\",group:\"action\"}},{id:\"didnt-find\",title:\"Didn't find it?\",description:\"TBD info about ILL, scope of collections, and problem cases\",icon:{code:\"swap_horiz\",group:\"action\"}},{},{id:\"guides\",title:\"Guides\",description:\"info about research, subject, course, and how to guides; how to find in BULS by way of search and related more info links; link out to LibGuides home\",icon:{code:\"directions\",group:\"maps\"}},{id:\"glossary\",title:\"Glossary\",description:\"list of common terms (jargon) and definitions\",icon:{code:\"view_list\",group:\"action\"}},{},{id:\"query-builder\",title:\"Query Builder\",description:\"placeholder for this, tbd functionality for future development; interim step may just be to have text demonstrating adv query syntax\",icon:{code:\"find_in_page\",group:\"action\"}},{},{id:\"saving-results\",title:\"Saving Results\",description:\"information about My Favorites, exporting results, ref managers\",icon:{code:\"save\",group:\"content\"}},{id:\"citing-sources\",title:\"Citing Sources\",description:\"likely, but may depend on if including saving results; would have info about ref managers\",icon:{code:\"create\",group:\"content\"}},{id:\"account\",title:\"Account\",description:\"information about My Library Account functionality- loans, renewals, policies?; may also highlight or link to My Library Account\",icon:{code:\"account_box\",group:\"action\"}},{},{id:\"for-instructors\",title:\"For Instructors\",description:'may be more \"For\" sections; will need considerable content work',icon:{code:\"info\",group:\"action\"}},{},{id:\"ask-us\",title:\"Ask Us\",description:\"needs definition; how to point to chat? link to ask a librarian?\",icon:{code:\"forum\",group:\"communication\"}},{id:\"feedback\",title:\"Feedback\",description:'directs to a new form to send feedback in the format of specific questions, e.g. \"rate your experience\", \"did you find what you\\'re looking for?\", \"send us your thoughts on improving search\"; will want to clearly differentiate from Ask and reference help, so that patrons who need help soon can get it',icon:{code:\"chat\",group:\"communication\"}}],helpMenuWidth:500,logMessage:function(e){this.logToConsole&&console.log(\"bulib-help-menu) \"+e)},logEventToAnalytics:function(e,n,t){!function(e,n,t){window.ga&&window.ga(\"send\",\"event\",e,n,t)}(e,n,t)},logHelpEvent:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.pathname,t=\"help-menu\";this.logMessage(\"logging '\".concat(t,\"' event with action: '\").concat(e,\"', label:'\").concat(n,\"'. [publish: \").concat(this.publishEvents,\"]\")),this.publishEvents&&this.logEventToAnalytics(t,e,n)},isNotificationDismissed:function(){try{var e=window.localStorage.getItem(s);return null!==e&&(!(Date.now()-e>=r.notificationIndicatorExpiration)||(this.logMessage(\"'\".concat(s,\"' value is present, but has expired. removing it returning 'not dismissed'\")),localStorage.removeItem(s),!1))}catch(e){return this.logMessage(e),!0}},showNotificationIndicatorIfNotDismissed:function(){this.enableNotificationIndicator&&!this.isNotificationDismissed()&&(this.logMessage(\"'enableNotificationIndicator' is true, local storage is enabled, and it's not dismissed, so we'll show the indicator\"),document.querySelector(\"help-menu-topbar\").style.setProperty(\"--notification-indicator-display\",\"inline-block\"))},dismissNotificationIndicator:function(){try{this.enableNotificationIndicator&&(window.localStorage.setItem(s,Date.now()),document.querySelector(\"help-menu-topbar\").style.setProperty(\"--notification-indicator-display\",\"none\"),this.logMessage(\"notification-indicator dismissed\"))}catch(e){this.logMessage(e)}},get_entry_by_id:function(e){for(var n=0;n<this.list_of_elements.length;n++)if(this.list_of_elements[n].id===e)return this.list_of_elements[n];for(var t=0;t<this.list_of_updates.length;t++)if(this.list_of_updates[t].id===e)return this.list_of_updates[t];return{}},override_with_config:function(e){e&&Object.keys(e)&&(Object.keys(e).includes(\"logToConsole\")&&(this.logToConsole=e.logToConsole),Object.keys(e).includes(\"publishEvents\")&&(this.publishEvents=e.publishEvents),Object.keys(e).includes(\"enableNotificationIndicator\")&&(this.enableNotificationIndicator=e.enableNotificationIndicator),Object.keys(e).includes(\"notificationIndicatorExpiration\")&&(this.notificationIndicatorExpiration=e.notificationIndicatorExpiration),Object.keys(e).includes(\"helpMenuWidth\")&&(this.helpMenuWidth=e.helpMenuWidth),Object.keys(e).includes(\"helpMenuTitle\")&&(this.helpMenuTitle=e.helpMenuTitle),Object.keys(e).includes(\"logEventToAnalytics\")&&(this.logEventToAnalytics=e.logEventToAnalytics),Object.keys(e).includes(\"entriesLabel\")&&(this.entriesLabel=e.entriesLabel),Object.keys(e).includes(\"list_of_elements\")&&(this.list_of_elements=e.list_of_elements),Object.keys(e).includes(\"updatesLabel\")&&(this.updatesLabel=e.updatesLabel),Object.keys(e).includes(\"list_of_updates\")&&(this.list_of_updates=e.list_of_updates))}},c=function(e,n,t,i,o){var l={};n.has(\"helpMenuConfig\")&&(l=n.get(\"helpMenuConfig\")),n.has(a)&&(l=n.get(a)),e.override_with_config(l),t.helpMenuTitle=e.helpMenuTitle,t.entriesLabel=e.entriesLabel,t.helpContentList=e.list_of_elements,t.updatesLabel=e.updatesLabel,t.helpContentUpdates=e.list_of_updates,t.hide=function(){o.hide()},t.back=function(){t.entry=null,window.top.location.hash=\"\"},t.openItem=function(n){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.entry=e.get_entry_by_id(n),i&&e.logHelpEvent(\"select-item\",n)},t.setEntryIdFromHash=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=window.location.hash.substring(1);n&&t.openItem(n,e)},t.openHelpInNewWindow=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",i=window.location.pathname,o=\"/primo-explore/static-file/help\"+window.location.search;n&&(o+=\"#\"+n,i=n);var l=e.helpMenuTitle||\"Search Help Menu\",a=\"width=\".concat(e.helpMenuWidth,\",height=800,resizable=0,location=0,menubar=0,scrollbars=yes\");e.logHelpEvent(\"open-window\",i);var s=open(o,l,a);s.onload=function(){this.document.title=l},s.addEventListener(\"hashchange\",t.setEntryIdFromHash,!0),t.hide()},i(t.setEntryIdFromHash(!1),10),window.addEventListener(\"hashchange\",t.setEntryIdFromHash,!0),window.addEventListener(\"openHelpMenuEvent\",(function(n){var i=n.detail||\"\";e.logMessage(\"opening helpMenu from 'openHelpMenuEvent' with 'item_id': '\"+i+\"'\"),t.openHelpInNewWindow(i)}))};angular.module(\"helpMenuContentDisplay\",[]).constant(\"helpMenuHelper\",r).controller(\"helpMenuPopupController\",[\"helpMenuHelper\",\"$injector\",\"$scope\",\"$timeout\",\"$mdDialog\",c]).component(\"prmExploreFooterAfter\",{template:'\\n      <help-menu-content-display>\\n        <div ng-if=\"'.concat(window.location.pathname.includes(\"/static-file/help\"),'\">').concat(l,\"</div>\\n      </help-menu-content-display>\"),controller:\"helpMenuPopupController\"}),angular.module(\"helpMenuTopbar\",[\"ngMaterial\"]).constant(\"helpMenuHelper\",r).controller(\"helpMenuDialogController\",[\"helpMenuHelper\",\"$injector\",\"$scope\",\"$timeout\",\"$mdDialog\",c]).controller(\"helpMenuTopbarController\",[\"helpMenuHelper\",\"$injector\",\"$mdDialog\",function(e,n,t){var l={};n.has(\"helpMenuConfig\")&&(l=n.get(\"helpMenuConfig\")),n.has(a)&&(l=n.get(a)),e.override_with_config(l),e.showNotificationIndicatorIfNotDismissed(),this.openHelpMenu=function(n){var l;e.logHelpEvent(\"open-dialog\",window.location.pathname),e.dismissNotificationIndicator(),t.show({controller:\"helpMenuDialogController\",template:(l=e.helpMenuWidth,'\\n  <md-dialog id=\"search-help-dialog\" aria-label=\"Search Help Menu Dialog\" style=\"width: '.concat(l,'px;\">\\n    <form>\\n      <md-toolbar>\\n        <div class=\"md-toolbar-tools\">\\n          ').concat(i,'\\n          <span flex></span>\\n          <md-button class=\"md-icon-button md-button md-primoExplore-theme md-ink-ripple\" ng-click=\"hide()\">\\n            <prm-icon aria-label=\"Close dialog\" icon-type=\"svg\" svg-icon-set=\"navigation\" icon-definition=\"ic_close_24px\"></prm-icon>\\n          </md-button>\\n        </div>\\n      </md-toolbar>\\n      <md-dialog-content>\\n        <div class=\"md-dialog-content\">').concat(o,'</div>\\n      </md-dialog-content>\\n      <md-dialog-actions layout=\"row\">\\n        <md-button ng-click=\"openHelpInNewWindow(entry.id)\">Open in New Window</md-button>\\n      </md-dialog-actions>\\n    </form>\\n  </md-dialog>')),hasBackdrop:!0,multiple:!1,clickOutsideToClose:!0,fullscreen:!1,focusOnOpen:!0})}}]).component(\"prmSearchBookmarkFilterAfter\",{template:'\\n      <help-menu-topbar>\\n        <div class=\"layout-align-center layout-row\">\\n          <a class=\"md-icon-button button-over-dark md-button md-primoExplore-theme md-ink-ripple\"\\n                    aria-label=\"Open Search Help Menu\" ng-click=\"$ctrl.openHelpMenu($event)\"\\n                    href=\"#\" title=\"open help menu\">\\n            <prm-icon icon-type=\"svg\" svg-icon-set=\"action\" icon-definition=\"ic_help_24px\"></prm-icon>\\n          </a>\\n        </div>\\n        <span class=\"notification-indicator\"></span>\\n      </help-menu-topbar>',controller:\"helpMenuTopbarController\"})}]);","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.primoExploreCustomSearchBarSubMenu=t():e.primoExploreCustomSearchBarSubMenu=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){n(1),e.exports=\"searchBarSubMenu\"},function(e,t,n){\"use strict\";n.r(t);angular.module(\"searchBarSubMenu\",[]).controller(\"searchBarSubMenuController\",[\"searchBarSubMenuItems\",\"$scope\",\"$filter\",function(e,t,n){this.$onInit=function(){t.items=e},t.translate=function(e){return e.replace(/\\{(.+?)\\}/g,(function(e,t){return n(\"translate\")(t)}))},t.goToUrl=function(e){window.open(e,\"_blank\")}}]).component(\"searchBarSubMenu\",{controller:\"searchBarSubMenuController\",template:'<div class=\"layout-align-end-center layout-row flex search-bar-sub-menu\">\\n  <ul>\\n    <li ng-repeat=\"item in items\">\\n    <button data-href=\"{{ translate(item.action) }}\" aria-label=\"{{ translate(item.description) }}\" ng-click=\"goToUrl(translate(item.action))\" class=\"button-with-icon zero-margin md-button md-small {{item.cssClasses}}\" type=\"button\">\\n      <md-tooltip md-direction=\"bottom\" md-delay=\"500\">{{ translate(item.description) }}</md-tooltip><prm-icon style=\"z-index:1\" icon-type=\"svg\" svg-icon-set=\"{{item.icon.set}}\" icon-definition=\"{{item.icon.icon}}\"></prm-icon>\\n      <span class=\"search-bar-sub-menu-item\" ng-class=\"(item.show_xs) ? \\'\\' : \\'hide-xs\\'\">{{ translate(item.name) }}</span>\\n    </button>\\n    </li>\\n  </ul>\\n</div>\\n'})}]).default}));\n//# sourceMappingURL=index.js.map","angular.module('bulibUnpaywall', [])\n  .controller('unpaywallController', ['$http', '$injector',\n    function($http, $injector) {\n      var self = this;  // 'this' changes scope inside of the $http.get(). 'self' is easier to track/trace\n\n      var LOG_CONFIG_DISCOVERY = false;\n\n      var logEventToGoogleAnalytics = function(category, action, label){\n        if(window.ga){ window.ga('send', 'event', category, action, label); }\n      }\n\n      // obtain custom configuration information from 'unpaywallConfig' or primo-studio constant\n      var unpaywallConfig = {};\n      if ($injector.modules && LOG_CONFIG_DISCOVERY) {\n        console.log($injector.modules);\n      }\n      if ($injector.has('unpaywallConfig')) {\n        if (LOG_CONFIG_DISCOVERY) { console.log(\"'unpaywallConfig' found: \"); }\n        unpaywallConfig = $injector.get('unpaywallConfig');\n      }\n      if ($injector.has('primoExploreUnpaywallStudioConfig')) {\n        if (LOG_CONFIG_DISCOVERY) { console.log(\"'primoExploreUnpaywallStudioConfig' found: \"); }\n        unpaywallConfig = $injector.get('primoExploreUnpaywallStudioConfig');\n      }\n      if (LOG_CONFIG_DISCOVERY) { console.log(unpaywallConfig); }\n\n      // provide 'unpaywall' organization with default value including some context that it's from us (for rate-limiting)\n      self.email = unpaywallConfig.email || \"primo-explore-unpaywall@npmjs.com\";\n\n      // provide additional customization options (with defaults)\n      self.logToConsole = (Object.keys(unpaywallConfig).includes(\"logToConsole\")) ? unpaywallConfig.logToConsole : true;\n      self.publishEvents = (Object.keys(unpaywallConfig).includes(\"publishEvents\")) ? unpaywallConfig.publishEvents : false;\n      self.showVersionLabel = (Object.keys(unpaywallConfig).includes(\"showVersionLabel\")) ? unpaywallConfig.showVersionLabel : false;\n      self.showDebugTable = (Object.keys(unpaywallConfig).includes(\"showDebugTable\")) ? unpaywallConfig.showDebugTable : false;\n      self.showOnResultsPage = (Object.keys(unpaywallConfig).includes(\"showOnResultsPage\")) ? unpaywallConfig.showOnResultsPage : true;\n      self.overrideOACheck = (Object.keys(unpaywallConfig).includes(\"overrideOACheck\")) ? unpaywallConfig.overrideOACheck : false;\n      self.logEvent = unpaywallConfig.logEvent || logEventToGoogleAnalytics;\n\n      // customize UI/UX\n      self.labelText = (Object.keys(unpaywallConfig).includes(\"labelText\")) ? unpaywallConfig.labelText : null;\n      self.imageUrl  = (Object.keys(unpaywallConfig).includes(\"imageUrl\")) ? unpaywallConfig.imageUrl : null;\n      self.imageStyle = (Object.keys(unpaywallConfig).includes(\"imageStyle\")) ? unpaywallConfig.imageStyle : \"height: 24px; vertical-align: bottom; padding-right: 5px;\";\n      \n      // conditionally log to the console\n      self.logMessageToConsole = function (message) {\n        if (self.logToConsole) { console.log(\"bulib-unpaywall) \" + message); }\n      }\n\n      // conditionally call customized 'logEvent'\n      self.logEventToAnalytics = function (category, action, label) {\n        self.logMessageToConsole(\"triggering '\" + category + \".\" + action + \"' event [publish=\" + self.publishEvents + \"].\");\n        if (self.publishEvents) { self.logEvent(category, action, label); }\n      }\n\n      // ng-click response that logs data to google analytics\n      self.trackLinkClick = function (doi) {\n        self.logMessageToConsole(\"unpaywall link used for doi: \" + doi);\n        self.logEventToAnalytics(\"unpaywall\", \"usage\", self.listOrFullViewLabel);\n      };\n\n      self.$postLink = function(){\n        self.parentCtrl = self.prmSearchResultAvailabilityLine\n        var item = self.parentCtrl.result;  // item data is stored in 'prmSearchResultAvailability' (its parent)\n\n        // obtain contextual info on whether you're on the result list of the full item view\n        var onFullView = this.parentCtrl.isFullView || this.parentCtrl.isOverlayFullView;\n        self.listOrFullViewLabel = onFullView ? 'full' : 'list';\n        self.show = onFullView || self.showOnResultsPage;\n\n        try {\n          // obtain doi and open access information from the item PNX (metadata)\n          var addata = item.pnx.addata;\n          if (addata) {\n            this.doi = addata.hasOwnProperty(\"doi\") ? addata.doi[0] : null; //default to first doi (list)\n            this.is_oa = addata.hasOwnProperty(\"oa\"); //true if property is present at all (regardless of value)\n          }\n\n          // if there's a doi and it's not already open access, ask the oadoi.org for an OA link\n          if (this.doi && (!this.is_oa || self.overrideOACheck) && self.show) {\n            self.logEventToAnalytics('unpaywall', 'api-call', self.listOrFullViewLabel);\n\n            // make the actual call to unpaywall API\n            var apiUrl = \"https://api.oadoi.org/v2/\" + self.doi + \"?email=\" + self.email;\n            self.logMessageToConsole(\"-> making 'api-call' to \" + apiUrl);\n            $http.get(encodeURI(apiUrl)).then(\n              function (successResponse) {\n                // if there is a \"best open access location\", save it so it can be used in the template above\n                var best_oa_location = successResponse.data.best_oa_location;\n                if (!best_oa_location) {\n                  return; // can't get what we want from unpaywall. returning with nothing\n                }\n\n                // get the \"best\" content link from this \"best_oa_location\"\n                self.best_oa_link = best_oa_location.url || \"\";\n                self.logMessageToConsole(\"successfully acquired a 'best_oa_location' for doi '\" + self.doi + \"' at url: \" + self.best_oa_link);\n                self.logEventToAnalytics('unpaywall', 'api-success', self.listOrFullViewLabel);\n\n                // optionally display whether the link is to a published, submitted, or accepted version\n                var best_oa_version = best_oa_location.version.toLowerCase() || \"\";\n                if (best_oa_version.includes(\"publish\")) {\n                  self.best_oa_version = \"\";  // users should assume it's the 'published' version without it being clarified in the UI\n                } else {\n                  self.best_oa_version = (best_oa_version.includes(\"submit\")) ? \"Submitted\" : \"Accepted\";\n                }\n              }, function (errorResponse) {\n                self.logMessageToConsole(\"[error status: \" + errorResponse.status + \"] error calling unpaywall API: \" + errorResponse.statusText);\n              }\n            );\n          }\n\n        } catch (e) {\n          self.logMessageToConsole(\"error caught in unpaywallController: \" + e.message);\n        }\n      }\n\n    }\n  ])\n  .component('bulibUnpaywall', {\n    require: {\n      prmSearchResultAvailabilityLine: '^prmSearchResultAvailabilityLine'\n    },\n    template: '\\\n      <unpaywall ng-if=\"$ctrl.show\">\\\n        <div layout=\"flex\" ng-if=\"$ctrl.best_oa_link\" class=\"layout-row\" style=\"margin-top: 5px;\">\\\n          <a ng-click=\"$ctrl.trackLinkClick($ctrl.doi)\" target=\"_blank\" href=\"{{$ctrl.best_oa_link}}\"\\\n            style=\"margin-left: 3px; margin-top: 3px;\" rel=\"noreferrer\">\\\n            \\\n            <img ng-if=\"$ctrl.imageUrl\" src=\"{{$ctrl.imageUrl}}\" alt=\"unpaywall logo\" style=\"{{$ctrl.imageStyle}}\">\\\n            <prm-icon ng-hide=\"$ctrl.imageUrl\" icon-type=\"svg\" svg-icon-set=\"action\" icon-definition=\"ic_lock_open_24px\" style=\"color: #f68212;\"></prm-icon>\\\n            \\\n            <span ng-if=\"$ctrl.labelText\">{{$ctrl.labelText}}</span>\\\n            <span ng-hide=\"$ctrl.labelText\"><strong>Open Access</strong> available via unpaywall</span>\\\n            \\\n            <span ng-if=\"$ctrl.showVersionLabel && $ctrl.best_oa_version\">&nbsp({{$ctrl.best_oa_version}} version)</span>\\\n            <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\\\n          </a>\\\n        </div>\\\n        <div ng-if=\"$ctrl.showDebugTable\" class=\"layout-row\">\\\n          <table>\\\n            <tr><td><strong>doi</strong></td><td>{{$ctrl.doi}}</td></tr>\\\n            <tr><td><strong>is_OA</strong></td><td>{{$ctrl.is_oa}}</td>\\\n            <tr><td><strong>best_oa_link</strong></td><td>{{$ctrl.best_oa_link}}</td></tr>\\\n            <tr><td><strong>best_oa_version</strong></td><td>{{$ctrl.best_oa_version}}</td></tr>\\\n          </table>\\\n        </div>\\\n      </unpaywall>',\n    controller: 'unpaywallController'\n  });"]}